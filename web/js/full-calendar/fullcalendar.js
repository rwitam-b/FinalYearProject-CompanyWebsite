"use strict";!function(a){"function"==typeof define&&define.amd?define(["jquery","moment"],a):"object"==typeof exports?module.exports=a(require("jquery"),require("moment")):a(jQuery,moment)}(function(a,b){function f(a){return aa(a,e)}function g(a,b){b.left&&a.css({"border-left-width":1,"margin-left":b.left-1}),b.right&&a.css({"border-right-width":1,"margin-right":b.right-1})}function h(a){a.css({"margin-left":"","margin-right":"","border-left-width":"","border-right-width":""})}function i(){a("body").addClass("fc-not-allowed")}function j(){a("body").removeClass("fc-not-allowed")}function k(b,c,d){var e=Math.floor(c/b.length),f=Math.floor(c-e*(b.length-1)),g=[],h=[],i=[],j=0;l(b),b.each(function(c,d){var k=c===b.length-1?f:e,l=a(d).outerHeight(!0);l<k?(g.push(d),h.push(l),i.push(a(d).height())):j+=l}),d&&(c-=j,e=Math.floor(c/g.length),f=Math.floor(c-e*(g.length-1))),a(g).each(function(b,c){var d=b===g.length-1?f:e,j=h[b],k=i[b],l=d-(j-k);j<d&&a(c).height(l)})}function l(a){a.height("")}function m(b){var c=0;return b.find("> *").each(function(b,d){var e=a(d).outerWidth();e>c&&(c=e)}),c++,b.width(c),c}function n(a,b){var d,c=a.add(b);return c.css({position:"relative",left:-1}),d=a.outerHeight()-b.outerHeight(),c.css({position:"",left:""}),d}function o(b){var c=b.css("position"),d=b.parents().filter(function(){var b=a(this);return/(auto|scroll)/.test(b.css("overflow")+b.css("overflow-y")+b.css("overflow-x"))}).eq(0);return"fixed"!==c&&d.length?d:a(b[0].ownerDocument||document)}function p(a,b){var c=a.offset(),d=c.left-(b?b.left:0),e=c.top-(b?b.top:0);return{left:d,right:d+a.outerWidth(),top:e,bottom:e+a.outerHeight()}}function q(a,b){var c=a.offset(),d=s(a),e=c.left+x(a,"border-left-width")+d.left-(b?b.left:0),f=c.top+x(a,"border-top-width")+d.top-(b?b.top:0);return{left:e,right:e+a[0].clientWidth,top:f,bottom:f+a[0].clientHeight}}function r(a,b){var c=a.offset(),d=c.left+x(a,"border-left-width")+x(a,"padding-left")-(b?b.left:0),e=c.top+x(a,"border-top-width")+x(a,"padding-top")-(b?b.top:0);return{left:d,right:d+a.width(),top:e,bottom:e+a.height()}}function s(a){var d,b=a.innerWidth()-a[0].clientWidth,c=a.innerHeight()-a[0].clientHeight;return b=t(b),c=t(c),d={left:0,right:0,top:0,bottom:c},v()&&"rtl"==a.css("direction")?d.left=b:d.right=b,d}function t(a){return a=Math.max(0,a),a=Math.round(a)}function v(){return null===u&&(u=w()),u}function w(){var b=a("<div><div/></div>").css({position:"absolute",top:-1e3,left:0,border:0,padding:0,overflow:"scroll",direction:"rtl"}).appendTo("body"),c=b.children(),d=c.offset().left>b.offset().left;return b.remove(),d}function x(a,b){return parseFloat(a.css(b))||0}function y(a){return 1==a.which&&!a.ctrlKey}function z(a){var b=a.originalEvent.touches;return b&&b.length?b[0].pageX:a.pageX}function A(a){var b=a.originalEvent.touches;return b&&b.length?b[0].pageY:a.pageY}function B(a){return/^touch/.test(a.type)}function C(a){a.addClass("fc-unselectable").on("selectstart",E)}function D(a){a.removeClass("fc-unselectable").off("selectstart",E)}function E(a){a.preventDefault()}function F(a,b){var c={left:Math.max(a.left,b.left),right:Math.min(a.right,b.right),top:Math.max(a.top,b.top),bottom:Math.min(a.bottom,b.bottom)};return c.left<c.right&&c.top<c.bottom&&c}function G(a,b){return{left:Math.min(Math.max(a.left,b.left),b.right),top:Math.min(Math.max(a.top,b.top),b.bottom)}}function H(a){return{left:(a.left+a.right)/2,top:(a.top+a.bottom)/2}}function I(a,b){return{left:a.left-b.left,top:a.top-b.top}}function J(b){var e,f,c=[],d=[];for("string"==typeof b?d=b.split(/\s*,\s*/):"function"==typeof b?d=[b]:a.isArray(b)&&(d=b),e=0;e<d.length;e++)f=d[e],"string"==typeof f?c.push("-"==f.charAt(0)?{field:f.substring(1),order:-1}:{field:f,order:1}):"function"==typeof f&&c.push({func:f});return c}function K(a,b,c){var d,e;for(d=0;d<c.length;d++)if(e=L(a,b,c[d]))return e;return 0}function L(a,b,c){return c.func?c.func(a,b):M(a[c.field],b[c.field])*(c.order||1)}function M(b,c){return b||c?null==c?-1:null==b?1:"string"===a.type(b)||"string"===a.type(c)?String(b).localeCompare(String(c)):b-c:0}function N(a,b){var g,h,i,j,c=a.start,d=a.end,e=b.start,f=b.end;if(d>e&&c<f)return c>=e?(g=c.clone(),i=!0):(g=e.clone(),i=!1),d<=f?(h=d.clone(),j=!0):(h=f.clone(),j=!1),{start:g,end:h,isStart:i,isEnd:j}}function Q(a,c){return b.duration({days:a.clone().stripTime().diff(c.clone().stripTime(),"days"),ms:a.time()-c.time()})}function R(a,c){return b.duration({days:a.clone().stripTime().diff(c.clone().stripTime(),"days")})}function S(a,c,d){return b.duration(Math.round(a.diff(c,d,!0)),d)}function T(a,b){var c,d,e;for(c=0;c<P.length&&(d=P[c],e=U(d,a,b),!(e>=1&&na(e)));c++);return d}function U(a,c,d){return null!=d?d.diff(c,a,!0):b.isDuration(c)?c.as(a):c.end.diff(c.start,a,!0)}function V(a,b,c){var d;return Y(c)?(b-a)/c:(d=c.asMonths(),Math.abs(d)>=1&&na(d)?b.diff(a,"months",!0)/d:b.diff(a,"days",!0)/c.asDays())}function W(a,b){var c,d;return Y(a)||Y(b)?a/b:(c=a.asMonths(),d=b.asMonths(),Math.abs(c)>=1&&na(c)&&Math.abs(d)>=1&&na(d)?c/d:a.asDays()/b.asDays())}function X(a,c){var d;return Y(a)?b.duration(a*c):(d=a.asMonths(),Math.abs(d)>=1&&na(d)?b.duration({months:d*c}):b.duration({days:a.asDays()*c}))}function Y(a){return Boolean(a.hours()||a.minutes()||a.seconds()||a.milliseconds())}function Z(a){return"[object Date]"===Object.prototype.toString.call(a)||a instanceof Date}function $(a){return/^\d+\:\d+(?:\:\d+\.?(?:\d{3})?)?$/.test(a)}function aa(a,b){var d,e,f,g,h,i,c={};if(b)for(d=0;d<b.length;d++){for(e=b[d],f=[],g=a.length-1;g>=0;g--)if(h=a[g][e],"object"==typeof h)f.unshift(h);else if(void 0!==h){c[e]=h;break}f.length&&(c[e]=aa(f))}for(d=a.length-1;d>=0;d--){i=a[d];for(e in i)e in c||(c[e]=i[e])}return c}function ba(a){var b=function(){};return b.prototype=a,new b}function ca(a,b){for(var c in a)da(a,c)&&(b[c]=a[c])}function da(a,b){return _.call(a,b)}function ea(b){return/undefined|null|boolean|number|string/.test(a.type(b))}function fa(b,c,d){if(a.isFunction(b)&&(b=[b]),b){var e,f;for(e=0;e<b.length;e++)f=b[e].apply(c,d)||f;return f}}function ga(){for(var a=0;a<arguments.length;a++)if(void 0!==arguments[a])return arguments[a]}function ha(a){return(a+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function ia(a){return a.replace(/&.*?;/g,"")}function ja(b){var c=[];return a.each(b,function(a,b){null!=b&&c.push(a+":"+b)}),c.join(";")}function ka(b){var c=[];return a.each(b,function(a,b){null!=b&&c.push(a+'="'+ha(b)+'"')}),c.join(" ")}function la(a){return a.charAt(0).toUpperCase()+a.slice(1)}function ma(a,b){return a-b}function na(a){return a%1===0}function oa(a,b){var c=a[b];return function(){return c.apply(a,arguments)}}function pa(a,b,c){var d,e,f,g,h,i=function(){var j=+new Date-g;j<b?d=setTimeout(i,b-j):(d=null,c||(h=a.apply(f,e),f=e=null))};return function(){f=this,e=arguments,g=+new Date;var j=c&&!d;return d||(d=setTimeout(i,b)),j&&(h=a.apply(f,e),f=e=null),h}}function va(c,d,e){var h,i,j,k,f=c[0],g=1==c.length&&"string"==typeof f;return b.isMoment(f)||Z(f)||void 0===f?k=b.apply(null,c):(h=!1,i=!1,g?qa.test(f)?(f+="-01",c=[f],h=!0,i=!0):(j=ra.exec(f))&&(h=!j[5],i=!0):a.isArray(f)&&(i=!0),k=d||h?b.utc.apply(b,c):b.apply(null,c),h?(k._ambigTime=!0,k._ambigZone=!0):e&&(i?k._ambigZone=!0:g&&k.utcOffset(f))),k._fullCalendar=!0,k}function za(){}function Aa(a,b){var c;return da(b,"constructor")&&(c=b.constructor),"function"!=typeof c&&(c=b.constructor=function(){a.apply(this,arguments)}),c.prototype=ba(a.prototype),ca(b,c.prototype),ca(a,c),c}function Ba(a,b){ca(b,a.prototype)}function Ca(b){var c=a.Deferred(),d=c.promise();if("function"==typeof b&&b(function(a){Ca.immediate&&(d._value=a),c.resolve(a)},function(){c.reject()}),Ca.immediate){var e=d.then;d.then=function(a,b){var c=d.state();if("resolved"===c){if("function"==typeof a)return Ca.resolve(a(d._value))}else if("rejected"===c&&"function"==typeof b)return b(),d;return e.call(d,a,b)}}return d}function Da(a){function c(a){return new Ca(function(c){var d=function(){Ca.resolve(a()).then(c).then(function(){b.shift(),b.length&&b[0]()})};b.push(d),1===b.length&&d()})}var b=[];this.add="number"==typeof a?pa(c,a):c,this.addQuickly=c}function Ka(a,b){return!a&&!b||!(!a||!b)&&(a.component===b.component&&La(a,b)&&La(b,a))}function La(a,b){for(var c in a)if(!/^(component|left|right|top|bottom)$/.test(c)&&a[c]!==b[c])return!1;return!0}function Pa(a){return{start:a.start.clone(),end:a.end?a.end.clone():null,allDay:a.allDay}}function Qa(a){var b=Sa(a);return"background"===b||"inverse-background"===b}function Ra(a){return"inverse-background"===Sa(a)}function Sa(a){return ga((a.source||{}).rendering,a.rendering)}function Ta(a){var c,d,b={};for(c=0;c<a.length;c++)d=a[c],(b[d._id]||(b[d._id]=[])).push(d);return b}function Ua(a,b){return a.start-b.start}function Va(d){var f,g,h,i,e=c.dataAttrPrefix;return e&&(e+="-"),f=d.data(e+"event")||null,f&&(f="object"==typeof f?a.extend({},f):{},g=f.start,null==g&&(g=f.time),h=f.duration,i=f.stick,delete f.start,delete f.time,delete f.duration,delete f.stick),null==g&&(g=d.data(e+"start")),null==g&&(g=d.data(e+"time")),null==h&&(h=d.data(e+"duration")),null==i&&(i=d.data(e+"stick")),g=null!=g?b.duration(g):null,h=null!=h?b.duration(h):null,i=Boolean(i),{eventProps:f,startTime:g,duration:h,stick:i}}function Ya(a,b){var c,d;for(c=0;c<b.length;c++)if(d=b[c],d.leftCol<=a.rightCol&&d.rightCol>=a.leftCol)return!0;return!1}function Za(a,b){return a.leftCol-b.leftCol}function _a(a){var c,d,e,b=[];for(c=0;c<a.length;c++){for(d=a[c],e=0;e<b.length&&cb(d,b[e]).length;e++);d.level=e,(b[e]||(b[e]=[])).push(d)}return b}function ab(a){var b,c,d,e,f;for(b=0;b<a.length;b++)for(c=a[b],d=0;d<c.length;d++)for(e=c[d],e.forwardSegs=[],f=b+1;f<a.length;f++)cb(e,a[f],e.forwardSegs)}function bb(a){var d,e,b=a.forwardSegs,c=0;if(void 0===a.forwardPressure){for(d=0;d<b.length;d++)e=b[d],bb(e),c=Math.max(c,1+e.forwardPressure);a.forwardPressure=c}}function cb(a,b,c){c=c||[];for(var d=0;d<b.length;d++)db(a,b[d])&&c.push(b[d]);return c}function db(a,b){return a.bottom>b.top&&a.top<b.bottom}function gb(a){this.items=a||[]}function hb(b,c){function h(a){c=a}function i(){var d=c.layout;g=b.options.theme?"ui":"fc",d?(e?e.empty():e=this.el=a("<div class='fc-toolbar "+c.extraClasses+"'/>"),e.append(k("left")).append(k("right")).append(k("center")).append('<div class="fc-clear"/>')):j()}function j(){e&&(e.remove(),e=d.el=null)}function k(d){var e=a('<div class="fc-'+d+'"/>'),h=c.layout[d];return h&&a.each(h.split(" "),function(c){var i,d=a(),h=!0;a.each(this.split(","),function(c,e){var i,j,k,l,m,n,o,p,q,r;"title"==e?(d=d.add(a("<h2>&nbsp;</h2>")),h=!1):((i=(b.options.customButtons||{})[e])?(k=function(a){i.click&&i.click.call(r[0],a)},l="",m=i.text):(j=b.getViewSpec(e))?(k=function(){b.changeView(e)},f.push(e),l=j.buttonTextOverride,m=j.buttonTextDefault):b[e]&&(k=function(){b[e]()},l=(b.overrides.buttonText||{})[e],m=b.options.buttonText[e]),k&&(n=i?i.themeIcon:b.options.themeButtonIcons[e],o=i?i.icon:b.options.buttonIcons[e],p=l?ha(l):n&&b.options.theme?"<span class='ui-icon ui-icon-"+n+"'></span>":o&&!b.options.theme?"<span class='fc-icon fc-icon-"+o+"'></span>":ha(m),q=["fc-"+e+"-button",g+"-button",g+"-state-default"],r=a('<button type="button" class="'+q.join(" ")+'">'+p+"</button>").click(function(a){r.hasClass(g+"-state-disabled")||(k(a),(r.hasClass(g+"-state-active")||r.hasClass(g+"-state-disabled"))&&r.removeClass(g+"-state-hover"))}).mousedown(function(){r.not("."+g+"-state-active").not("."+g+"-state-disabled").addClass(g+"-state-down")}).mouseup(function(){r.removeClass(g+"-state-down")}).hover(function(){r.not("."+g+"-state-active").not("."+g+"-state-disabled").addClass(g+"-state-hover")},function(){r.removeClass(g+"-state-hover").removeClass(g+"-state-down")}),d=d.add(r)))}),h&&d.first().addClass(g+"-corner-left").end().last().addClass(g+"-corner-right").end(),d.length>1?(i=a("<div/>"),h&&i.addClass("fc-button-group"),i.append(d),e.append(i)):e.append(d)}),e}function l(a){e&&e.find("h2").text(a)}function m(a){e&&e.find(".fc-"+a+"-button").addClass(g+"-state-active")}function n(a){e&&e.find(".fc-"+a+"-button").removeClass(g+"-state-active")}function o(a){e&&e.find(".fc-"+a+"-button").prop("disabled",!0).addClass(g+"-state-disabled")}function p(a){e&&e.find(".fc-"+a+"-button").prop("disabled",!1).removeClass(g+"-state-disabled")}function q(){return f}var d=this;d.setToolbarOptions=h,d.render=i,d.removeElement=j,d.updateTitle=l,d.activateButton=m,d.deactivateButton=n,d.disableButton=o,d.enableButton=p,d.getViewsWithButtons=q,d.el=null;var e,g,f=[]}function jb(d,e){function h(a){a._locale=g}function u(){m?x()&&(C(),y()):v()}function v(){d.addClass("fc"),d.on("click.fc","a[data-goto]",function(b){var c=a(this),d=c.data("goto"),e=f.moment(d.date),g=d.type,h=o.opt("navLink"+la(g)+"Click");"function"==typeof h?h(e,b):("string"==typeof h&&(g=h),W(e,g))}),f.bindOption("theme",function(a){n=a?"ui":"fc",d.toggleClass("ui-widget",a),d.toggleClass("fc-unthemed",!a)}),f.bindOptions(["isRTL","locale"],function(a){d.toggleClass("fc-ltr",!a),d.toggleClass("fc-rtl",a)}),m=a("<div class='fc-view-container'/>").prependTo(d);var b=H();j=new gb(b),k=f.header=b[0],l=f.footer=b[1],K(),L(),y(f.options.defaultView),f.options.handleWindowResize&&(r=pa(F,f.options.windowResizeDelay),a(window).resize(r))}function w(){o&&o.removeElement(),j.proxyCall("removeElement"),m.remove(),d.removeClass("fc fc-ltr fc-rtl fc-unthemed ui-widget"),d.off(".fc"),r&&a(window).unbind("resize",r),Ma.unneeded()}function x(){return d.is(":visible")}function y(b,c){s++;var d=o&&b&&o.type!==b;d&&(Z(),z()),!o&&b&&(o=f.view=p[b]||(p[b]=f.instantiateView(b)),o.setElement(a("<div class='fc-view fc-"+b+"-view' />").appendTo(m)),j.proxyCall("activateButton",b)),o&&(t=o.massageCurrentDate(t),o.isDateSet&&t>=o.intervalStart&&t<o.intervalEnd||x()&&(c&&o.captureInitialScroll(c),o.setDate(t,c),c&&o.releaseScroll(),M())),d&&$(),s--}function z(){j.proxyCall("deactivateButton",o.type),o.removeElement(),o=f.view=null}function A(){s++,Z();var a=o.type,b=o.queryScroll();z(),C(),y(a,b),$(),s--}function B(a){if(x())return a&&D(),s++,o.updateSize(!0),s--,!0}function C(){x()&&D()}function D(){var a=f.options.contentHeight,b=f.options.height;q="number"==typeof a?a:"function"==typeof a?a():"number"==typeof b?b-E():"function"==typeof b?b()-E():"parent"===b?d.parent().height()-E():Math.round(m.width()/Math.max(f.options.aspectRatio,.5))}function E(){return j.items.reduce(function(a,b){var c=b.el?b.el.outerHeight(!0):0;return a+c},0)}function F(a){!s&&a.target===window&&o.start&&B(!0)&&o.publiclyTrigger("windowResize",i)}function G(){x()&&f.reportEventChange()}function H(){return[new hb(f,I()),new hb(f,J())]}function I(){return{extraClasses:"fc-header-toolbar",layout:f.options.header}}function J(){return{extraClasses:"fc-footer-toolbar",layout:f.options.footer}}function K(){k.setToolbarOptions(I()),k.render(),k.el&&d.prepend(k.el)}function L(){l.setToolbarOptions(J()),l.render(),l.el&&d.append(l.el)}function M(){var a=f.getNow();a>=o.intervalStart&&a<o.intervalEnd?j.proxyCall("disableButton","today"):j.proxyCall("enableButton","today")}function N(a,b){o.select(f.buildSelectSpan.apply(f,arguments))}function O(){o&&o.unselect()}function P(){t=o.computePrevDate(t),y()}function Q(){t=o.computeNextDate(t),y()}function R(){t.add(-1,"years"),y()}function S(){t.add(1,"years"),y()}function T(){t=f.getNow(),y()}function U(a){t=f.moment(a).stripZone(),y()}function V(a){t.add(b.duration(a)),y()}function W(a,b){var c;b=b||"day",c=f.getViewSpec(b)||f.getUnitViewSpec(b),t=a.clone(),y(c?c.type:null)}function X(){return f.applyTimezone(t)}function Z(){Y++||m.css({width:"100%",height:m.height(),overflow:"hidden"})}function $(){--Y||m.css({width:"",height:"",overflow:""})}function _(){return f}function aa(){return o}function ca(a,b){var c;if("string"==typeof a){if(void 0===b)return f.options[a];c={},c[a]=b,da(c)}else"object"==typeof a&&da(a)}function da(a){var c,b=0;for(c in a)f.dynamicOverrides[c]=a[c];f.viewSpecCache={},f.populateOptionsHash();for(c in a)f.triggerOptionHandlers(c),b++;if(1===b){if("height"===c||"contentHeight"===c||"aspectRatio"===c)return void B(!0);if("defaultDate"===c)return;if("businessHours"===c)return void(o&&(o.unrenderBusinessHours(),o.renderBusinessHours()));if("timezone"===c)return f.rezoneArrayEventSources(),void f.refetchEvents()}K(),L(),p={},A()}function ea(a,b){var c=Array.prototype.slice.call(arguments,2);if(b=b||i,this.triggerWith(a,b,c),f.options[a])return f.options[a].apply(b,c)}var f=this;Ma.needed(),f.render=u,f.destroy=w,f.rerenderEvents=G,f.changeView=y,f.select=N,f.unselect=O,f.prev=P,f.next=Q,f.prevYear=R,f.nextYear=S,f.today=T,f.gotoDate=U,f.incrementDate=V,f.zoomTo=W,f.getDate=X,f.getCalendar=_,f.getView=aa,f.option=ca,f.publiclyTrigger=ea,f.dynamicOverrides={},f.viewSpecCache={},f.optionHandlers={},f.overrides=a.extend({},e),f.populateOptionsHash();var g;f.bindOptions(["locale","monthNames","monthNamesShort","dayNames","dayNamesShort","firstDay","weekNumberCalculation"],function(a,b,c,d,e,f,i){if("iso"===i&&(i="ISO"),g=ba(pb(a)),b&&(g._months=b),c&&(g._monthsShort=c),d&&(g._weekdays=d),e&&(g._weekdaysShort=e),null==f&&"ISO"===i&&(f=1),null!=f){var j=ba(g._week);j.dow=f,g._week=j}"ISO"!==i&&"local"!==i&&"function"!=typeof i||(g._fullCalendar_weekCalc=i),t&&h(t)}),f.defaultAllDayEventDuration=b.duration(f.options.defaultAllDayEventDuration),f.defaultTimedEventDuration=b.duration(f.options.defaultTimedEventDuration),f.moment=function(){var a;return"local"===f.options.timezone?(a=c.moment.apply(null,arguments),a.hasTime()&&a.local()):a="UTC"===f.options.timezone?c.moment.utc.apply(null,arguments):c.moment.parseZone.apply(null,arguments),h(a),a},f.localizeMoment=h,f.getIsAmbigTimezone=function(){return"local"!==f.options.timezone&&"UTC"!==f.options.timezone},f.applyTimezone=function(a){if(!a.hasTime())return a.clone();var d,b=f.moment(a.toArray()),c=a.time()-b.time();return c&&(d=b.clone().add(c),a.time()-d.time()===0&&(b=d)),b},f.getNow=function(){var a=f.options.now;return"function"==typeof a&&(a=a()),f.moment(a).stripZone()},f.getEventEnd=function(a){return a.end?a.end.clone():f.getDefaultEventEnd(a.allDay,a.start)},f.getDefaultEventEnd=function(a,b){var c=b.clone();return a?c.stripTime().add(f.defaultAllDayEventDuration):c.add(f.defaultTimedEventDuration),f.getIsAmbigTimezone()&&c.stripZone(),c},f.humanizeDuration=function(a){return a.locale(f.options.locale).humanize()},sb.call(f);var j,k,l,m,n,o,q,r,t,i=d[0],p={},s=0;t=null!=f.options.defaultDate?f.moment(f.options.defaultDate).stripZone():f.getNow(),f.getSuggestedViewHeight=function(){return void 0===q&&C(),q},f.isHeightAuto=function(){return"auto"===f.options.contentHeight||"auto"===f.options.height},f.setToolbarsTitle=function(a){j.proxyCall("updateTitle",a)},f.freezeContentHeight=Z,f.thawContentHeight=$;var Y=0;f.initialize()}function ob(b){a.each(nb,function(a,c){null==b[a]&&(b[a]=c(b))})}function pb(a){return b.localeData(a)||b.localeData("en")}function sb(){function l(a,b){return!d.options.lazyFetching||o(a,b)?p(a,b):Ca.resolve(k)}function m(){k=n(j),d.trigger("eventsReset",k)}function n(a){var c,e,b=[];for(c=0;c<a.length;c++)e=a[c],e.start.clone().stripZone()<h&&d.getEventEnd(e).stripZone()>g&&b.push(e);return b}function o(a,b){return!g||a<g||b>h}function p(a,b){return g=a,h=b,q()}function q(){return s(f,"reset")}function r(a){return s(E(a))}function s(a,b){var c,e;for("reset"===b?j=[]:"add"!==b&&(j=I(j,a)),c=0;c<a.length;c++)e=a[c],"pending"!==e._status&&i++,e._fetchId=(e._fetchId||0)+1,e._status="pending";for(c=0;c<a.length;c++)e=a[c],t(e,e._fetchId);return i?new Ca(function(a){d.one("eventsReceived",a)}):Ca.resolve(k)}function t(b,c){w(b,function(d){var f,g,h,e=a.isArray(b.events);if(c===b._fetchId&&"rejected"!==b._status){if(b._status="resolved",d)for(f=0;f<d.length;f++)g=d[f],h=e?g:V(g,b),h&&j.push.apply(j,Z(h));v()}})}function u(a){var b="pending"===a._status;a._status="rejected",b&&v()}function v(){i--,i||(m(j),d.trigger("eventsReceived",k))}function w(b,e){var f,j,i=c.sourceFetchers;for(f=0;f<i.length;f++){if(j=i[f].call(d,b,g.clone(),h.clone(),d.options.timezone,e),j===!0)return;if("object"==typeof j)return void w(j,e)}var k=b.events;if(k)a.isFunction(k)?(d.pushLoading(),k.call(d,g.clone(),h.clone(),d.options.timezone,function(a){e(a),d.popLoading()})):a.isArray(k)?e(k):e();else{var l=b.url;if(l){var p,m=b.success,n=b.error,o=b.complete;p=a.isFunction(b.data)?b.data():b.data;var q=a.extend({},p||{}),r=ga(b.startParam,d.options.startParam),s=ga(b.endParam,d.options.endParam),t=ga(b.timezoneParam,d.options.timezoneParam);r&&(q[r]=g.format()),s&&(q[s]=h.format()),d.options.timezone&&"local"!=d.options.timezone&&(q[t]=d.options.timezone),d.pushLoading(),a.ajax(a.extend({},qb,b,{data:q,success:function(b){b=b||[];var c=fa(m,this,arguments);a.isArray(c)&&(b=c),e(b)},error:function(){fa(n,this,arguments),e()},complete:function(){fa(o,this,arguments),d.popLoading()}}))}else e()}}function x(a){var b=y(a);b&&(f.push(b),s([b],"add"))}function y(b){var f,g,e=c.sourceNormalizers;if(a.isFunction(b)||a.isArray(b)?f={events:b}:"string"==typeof b?f={url:b}:"object"==typeof b&&(f=a.extend({},b)),f){for(f.className?"string"==typeof f.className&&(f.className=f.className.split(/\s+/)):f.className=[],a.isArray(f.events)&&(f.origArray=f.events,f.events=a.map(f.events,function(a){return V(a,f)})),g=0;g<e.length;g++)e[g].call(d,f);return f}}function z(a){B(F(a))}function A(a){null==a?B(f,!0):B(E(a))}function B(b,c){var d;for(d=0;d<b.length;d++)u(b[d]);c?(f=[],j=[]):(f=a.grep(f,function(a){for(d=0;d<b.length;d++)if(a===b[d])return!1;return!0}),j=I(j,b)),m()}function C(){return f.slice(1)}function D(b){return a.grep(f,function(a){return a.id&&a.id===b})[0]}function E(b){b?a.isArray(b)||(b=[b]):b=[];var d,c=[];for(d=0;d<b.length;d++)c.push.apply(c,F(b[d]));return c}function F(b){var c,d;for(c=0;c<f.length;c++)if(d=f[c],d===b)return[d];return d=D(b),d?[d]:a.grep(f,function(a){return G(b,a)})}function G(a,b){return a&&b&&H(a)==H(b)}function H(a){return("object"==typeof a?a.origArray||a.googleCalendarId||a.url||a.events:null)||a}function I(b,c){return a.grep(b,function(a){for(var b=0;b<c.length;b++)if(a.source===c[b])return!1;return!0})}function J(a){K([a])}function K(a){var b,c;for(b=0;b<a.length;b++)c=a[b],c.start=d.moment(c.start),c.end?c.end=d.moment(c.end):c.end=null,_(c,L(c));m()}function L(b){var c={};return a.each(b,function(a,b){M(a)&&void 0!==b&&ea(b)&&(c[a]=b)}),c}function M(a){return!/^_|^(id|allDay|start|end)$/.test(a)}function N(a,b){return O([a],b)}function O(a,b){var d,f,g,h,i,c=[];for(g=0;g<a.length;g++)if(f=V(a[g])){for(d=Z(f),h=0;h<d.length;h++)i=d[h],i.source||(b&&(e.events.push(i),i.source=e),j.push(i));c=c.concat(d)}return c.length&&m(),c}function P(b){var c,d;for(null==b?b=function(){return!0}:a.isFunction(b)||(c=b+"",b=function(a){return a._id==c}),j=a.grep(j,b,!0),d=0;d<f.length;d++)a.isArray(f[d].events)&&(f[d].events=a.grep(f[d].events,b,!0));m()}function T(b){return a.isFunction(b)?a.grep(j,b):null!=b?(b+="",a.grep(j,function(a){return a._id==b})):j}function U(a){a.start=d.moment(a.start),a.end&&(a.end=d.moment(a.end)),tb(a)}function V(c,e){var g,h,i,f={};if(d.options.eventDataTransform&&(c=d.options.eventDataTransform(c)),e&&e.eventDataTransform&&(c=e.eventDataTransform(c)),a.extend(f,c),e&&(f.source=e),f._id=c._id||(void 0===c.id?"_fc"+rb++:c.id+""),c.className?"string"==typeof c.className?f.className=c.className.split(/\s+/):f.className=c.className:f.className=[],g=c.start||c.date,h=c.end,$(g)&&(g=b.duration(g)),$(h)&&(h=b.duration(h)),c.dow||b.isDuration(g)||b.isDuration(h))f.start=g?b.duration(g):null,f.end=h?b.duration(h):null,f._recurring=!0;else{if(g&&(g=d.moment(g),!g.isValid()))return!1;h&&(h=d.moment(h),h.isValid()||(h=null)),i=c.allDay,void 0===i&&(i=ga(e?e.allDayDefault:void 0,d.options.allDayDefault)),W(g,h,i,f)}return d.normalizeEvent(f),f}function W(a,b,c,d){d.start=a,d.end=b,d.allDay=c,X(d),tb(d)}function X(a){Y(a),a.end&&!a.end.isAfter(a.start)&&(a.end=null),a.end||(d.options.forceEventDuration?a.end=d.getDefaultEventEnd(a.allDay,a.start):a.end=null)}function Y(a){null==a.allDay&&(a.allDay=!(a.start.hasTime()||a.end&&a.end.hasTime())),a.allDay?(a.start.stripTime(),a.end&&a.end.stripTime()):(a.start.hasTime()||(a.start=d.applyTimezone(a.start.time(0))),a.end&&!a.end.hasTime()&&(a.end=d.applyTimezone(a.end.time(0))))}function Z(b,c,d){var f,i,j,k,l,m,n,o,p,e=[];if(c=c||g,d=d||h,b)if(b._recurring){if(i=b.dow)for(f={},j=0;j<i.length;j++)f[i[j]]=!0;for(k=c.clone().stripTime();k.isBefore(d);)f&&!f[k.day()]||(l=b.start,m=b.end,n=k.clone(),o=null,l&&(n=n.time(l)),m&&(o=k.clone().time(m)),p=a.extend({},b),W(n,o,!l&&!m,p),e.push(p)),k.add(1,"days")}else e.push(b);return e}function _(b,c,e){function m(a,b){return e?S(a,b,e):c.allDay?R(a,b):Q(a,b)}var g,h,i,j,k,l,f={};return c=c||{},c.start||(c.start=b.start.clone()),void 0===c.end&&(c.end=b.end?b.end.clone():null),null==c.allDay&&(c.allDay=b.allDay),X(c),g={start:b._start.clone(),end:b._end?b._end.clone():d.getDefaultEventEnd(b._allDay,b._start),allDay:c.allDay},X(g),h=null!==b._end&&null===c.end,i=m(c.start,g.start),c.end?(j=m(c.end,g.end),k=j.subtract(i)):k=null,a.each(c,function(a,b){M(a)&&void 0!==b&&(f[a]=b)}),l=aa(T(b._id),h,c.allDay,i,k,f),{dateDelta:i,durationDelta:k,undo:l}}function aa(b,c,e,f,g,h){var i=d.getIsAmbigTimezone(),j=[];return f&&!f.valueOf()&&(f=null),g&&!g.valueOf()&&(g=null),a.each(b,function(b,k){var l,m;l={start:k.start.clone(),end:k.end?k.end.clone():null,allDay:k.allDay},a.each(h,function(a){l[a]=k[a]}),m={start:k._start,end:k._end,allDay:e},X(m),c?m.end=null:g&&!m.end&&(m.end=d.getDefaultEventEnd(m.allDay,m.start)),f&&(m.start.add(f),m.end&&m.end.add(f)),g&&m.end.add(g),i&&!m.allDay&&(f||g)&&(m.start.stripZone(),m.end&&m.end.stripZone()),a.extend(k,h,m),tb(k),j.push(function(){a.extend(k,l),tb(k)})}),function(){for(var a=0;a<j.length;a++)j[a]()}}var d=this;d.requestEvents=l,d.reportEventChange=m,d.isFetchNeeded=o,d.fetchEvents=p,d.fetchEventSources=s,d.refetchEvents=q,d.refetchEventSources=r,d.getEventSources=C,d.getEventSourceById=D,d.addEventSource=x,d.removeEventSource=z,d.removeEventSources=A,d.updateEvent=J,d.updateEvents=K,d.renderEvent=N,d.renderEvents=O,d.removeEvents=P,d.clientEvents=T,d.mutateEvent=_,d.normalizeEventDates=X,d.normalizeEventTimes=Y;var g,h,k,e={events:[]},f=[e],i=0,j=[];a.each((d.options.events?[d.options.events]:[]).concat(d.options.eventSources||[]),function(a,b){var c=y(b);c&&f.push(c)}),d.getEventCache=function(){return j},d.getPrunedEventCache=function(){return k},d.rezoneArrayEventSources=function(){var b,c,d;for(b=0;b<f.length;b++)if(c=f[b].events,a.isArray(c))for(d=0;d<c.length;d++)U(c[d])},d.buildEventFromInput=V,d.expandEvent=Z}function tb(a){a._allDay=a.allDay,a._start=a.start.clone(),a._end=a.end?a.end.clone():null}var c=a.fullCalendar={version:"3.2.0",internalApiVersion:8},d=c.views={};a.fn.fullCalendar=function(b){var c=Array.prototype.slice.call(arguments,1),d=this;return this.each(function(e,f){var i,g=a(f),h=g.data("fullCalendar");"string"==typeof b?h&&a.isFunction(h[b])&&(i=h[b].apply(h,c),e||(d=i),"destroy"===b&&g.removeData("fullCalendar")):h||(h=new ib(g,b),g.data("fullCalendar",h),h.render())}),d};var e=["header","footer","buttonText","buttonIcons","themeButtonIcons"];c.intersectRanges=N,c.applyAll=fa,c.debounce=pa,c.isInt=na,c.htmlEscape=ha,c.cssToStr=ja,c.proxy=oa,c.capitaliseFirstLetter=la,c.getOuterRect=p,c.getClientRect=q,c.getContentRect=r,c.getScrollbarWidths=s;var u=null;c.preventDefault=E,c.intersectRects=F,c.parseFieldSpecs=J,c.compareByFieldSpecs=K,c.compareByFieldSpec=L,c.flexibleCompare=M,c.computeIntervalUnit=T,c.divideRangeByDuration=V,c.divideDurationByDuration=W,c.multiplyDuration=X,c.durationHasTime=Y;var O=["sun","mon","tue","wed","thu","fri","sat"],P=["year","month","week","day","hour","minute","second","millisecond"];c.log=function(){var a=window.console;if(a&&a.log)return a.log.apply(a,arguments)},c.warn=function(){var a=window.console;return a&&a.warn?a.warn.apply(a,arguments):c.log.apply(c,arguments)};var _={}.hasOwnProperty;c.createObject=ba;var qa=/^\s*\d{4}-\d\d$/,ra=/^\s*\d{4}-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?)?$/,sa=b.fn,ta=a.extend({},sa),ua=b.momentProperties;ua.push("_fullCalendar"),ua.push("_ambigTime"),ua.push("_ambigZone"),c.moment=function(){return va(arguments)},c.moment.utc=function(){var a=va(arguments,!0);return a.hasTime()&&a.utc(),a},c.moment.parseZone=function(){return va(arguments,!0,!0)},sa.week=sa.weeks=function(a){var b=this._locale._fullCalendar_weekCalc;return null==a&&"function"==typeof b?b(this):"ISO"===b?ta.isoWeek.apply(this,arguments):ta.week.apply(this,arguments)},sa.time=function(a){if(!this._fullCalendar)return ta.time.apply(this,arguments);if(null==a)return b.duration({hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()});this._ambigTime=!1,b.isDuration(a)||b.isMoment(a)||(a=b.duration(a));var c=0;return b.isDuration(a)&&(c=24*Math.floor(a.asDays())),this.hours(c+a.hours()).minutes(a.minutes()).seconds(a.seconds()).milliseconds(a.milliseconds())},sa.stripTime=function(){return this._ambigTime||(this.utc(!0),this.set({hours:0,minutes:0,seconds:0,ms:0}),this._ambigTime=!0,this._ambigZone=!0),this},sa.hasTime=function(){return!this._ambigTime},sa.stripZone=function(){var a;return this._ambigZone||(a=this._ambigTime,this.utc(!0),this._ambigTime=a||!1,this._ambigZone=!0),this},sa.hasZone=function(){return!this._ambigZone},sa.local=function(a){return ta.local.call(this,this._ambigZone||a),this._ambigTime=!1,this._ambigZone=!1,this},sa.utc=function(a){return ta.utc.call(this,a),this._ambigTime=!1,this._ambigZone=!1,this},sa.utcOffset=function(a){return null!=a&&(this._ambigTime=!1,this._ambigZone=!1),ta.utcOffset.apply(this,arguments)},sa.format=function(){return this._fullCalendar&&arguments[0]?wa(this,arguments[0]):this._ambigTime?ya(this,"YYYY-MM-DD"):this._ambigZone?ya(this,"YYYY-MM-DD[T]HH:mm:ss"):ta.format.apply(this,arguments)},sa.toISOString=function(){return this._ambigTime?ya(this,"YYYY-MM-DD"):this._ambigZone?ya(this,"YYYY-MM-DD[T]HH:mm:ss"):ta.toISOString.apply(this,arguments)},function(){function h(a,b){return s(m(b).fakeFormatString,a)}function i(a,b){return ta.format.call(a,b)}function j(a,b,d,e,f){var g;return a=c.moment.parseZone(a),b=c.moment.parseZone(b),g=a.localeData(),d=g.longDateFormat(d)||d,k(m(d),a,b,e||" - ",f)}function k(a,b,c,d,e){var k,m,o,f=a.sameUnits,g=b.clone().stripZone(),h=c.clone().stripZone(),i=t(a.fakeFormatString,b),j=t(a.fakeFormatString,c),l="",n="",p="",q="",r="";for(k=0;k<f.length&&(!f[k]||g.isSame(h,f[k]));k++)l+=i[k];for(m=f.length-1;m>k&&(!f[m]||g.isSame(h,f[m]))&&(m-1!==k||"."!==i[m]);m--)n=i[m]+n;for(o=k;o<=m;o++)p+=i[o],q+=j[o];return(p||q)&&(r=e?q+d+p:p+d+q),u(l+r+n)}function m(a){return l[a]||(l[a]=n(a))}function n(a){var b=o(a);return{fakeFormatString:q(b),sameUnits:r(b)}}function o(a){for(var c,b=[],d=/\[([^\]]*)\]|\(([^\)]*)\)|(LTS|LT|(\w)\4*o?)|([^\w\[\(]+)/g;c=d.exec(a);)c[1]?b.push.apply(b,p(c[1])):c[2]?b.push({maybe:o(c[2])}):c[3]?b.push({token:c[3]}):c[5]&&b.push.apply(b,p(c[5]));return b}function p(a){return". "===a?["."," "]:[a]}function q(c){var g,h,e=[];for(g=0;g<c.length;g++)h=c[g],"string"==typeof h?e.push("["+h+"]"):h.token?h.token in f?e.push(b+"["+h.token+"]"):e.push(h.token):h.maybe&&e.push(d+q(h.maybe)+d);return e.join(a)}function r(a){var c,d,e,b=[];for(c=0;c<a.length;c++)d=a[c],d.token?(e=g[d.token.charAt(0)],b.push(e?e.unit:"second")):d.maybe?b.push.apply(b,r(d.maybe)):b.push(null);return b}function s(a,b){return u(t(a,b).join(""))}function t(c,d){var j,k,e=[],g=i(d,c),h=g.split(a);for(j=0;j<h.length;j++)k=h[j],k.charAt(0)===b?e.push(f[k.substring(1)](d)):e.push(k);return e}function u(a){return a.replace(e,function(a,b){return b.match(/[1-9]/)?b:""})}function v(a){var c,d,e,f,b=o(a);
for(c=0;c<b.length;c++)d=b[c],d.token&&(e=g[d.token.charAt(0)],e&&(!f||e.value>f.value)&&(f=e));return f?f.unit:null}c.formatDate=h,c.formatRange=j,c.oldMomentFormat=i,c.queryMostGranularFormatUnit=v;var a="\v",b="",d="",e=new RegExp(d+"([^"+d+"]*)"+d,"g"),f={t:function(a){return i(a,"a").charAt(0)},T:function(a){return i(a,"A").charAt(0)}},g={Y:{value:1,unit:"year"},M:{value:2,unit:"month"},W:{value:3,unit:"week"},w:{value:3,unit:"week"},D:{value:4,unit:"day"},d:{value:4,unit:"day"}},l={}}();var wa=c.formatDate,xa=c.formatRange,ya=c.oldMomentFormat;c.Class=za,za.extend=function(){var b,c,a=arguments.length;for(b=0;b<a;b++)c=arguments[b],b<a-1&&Ba(this,c);return Aa(this,c||{})},za.mixin=function(a){Ba(this,a)},c.Promise=Ca,Ca.immediate=!0,Ca.resolve=function(b){if(b&&"function"==typeof b.resolve)return b.promise();if(b&&"function"==typeof b.then)return b;var c=a.Deferred().resolve(b),d=c.promise();if(Ca.immediate){var e=d.then;d._value=b,d.then=function(a,c){return"function"==typeof a?Ca.resolve(a(b)):e.call(d,a,c)}}return d},Ca.reject=function(){return a.Deferred().reject().promise()},Ca.all=function(b){var d,e,f,c=!1;if(Ca.immediate)for(c=!0,d=[],e=0;e<b.length;e++)if(f=b[e],f&&"function"==typeof f.state&&"resolved"===f.state()&&"_value"in f)d.push(f._value);else{if(f&&"function"==typeof f.then){c=!1;break}d.push(f)}return c?Ca.resolve(d):a.when.apply(a.when,b).then(function(){return a.when(a.makeArray(arguments))})},c.TaskQueue=Da;var Ea=c.EmitterMixin={on:function(b,c){return a(this).on(b,this._prepareIntercept(c)),this},one:function(b,c){return a(this).one(b,this._prepareIntercept(c)),this},_prepareIntercept:function(b){var c=function(a,c){return b.apply(c.context||this,c.args||[])};return b.guid||(b.guid=a.guid++),c.guid=b.guid,c},off:function(b,c){return a(this).off(b,c),this},trigger:function(b){var c=Array.prototype.slice.call(arguments,1);return a(this).triggerHandler(b,{args:c}),this},triggerWith:function(b,c,d){return a(this).triggerHandler(b,{context:c,args:d}),this}},Fa=c.ListenerMixin=function(){var b=0,c={listenerId:null,listenTo:function(b,c,d){if("object"==typeof c)for(var e in c)c.hasOwnProperty(e)&&this.listenTo(b,e,c[e]);else"string"==typeof c&&b.on(c+"."+this.getListenerNamespace(),a.proxy(d,this))},stopListeningTo:function(a,b){a.off((b||"")+"."+this.getListenerNamespace())},getListenerNamespace:function(){return null==this.listenerId&&(this.listenerId=b++),"_listener"+this.listenerId}};return c}(),Ga=za.extend(Fa,{isHidden:!0,options:null,el:null,margin:10,constructor:function(a){this.options=a||{}},show:function(){this.isHidden&&(this.el||this.render(),this.el.show(),this.position(),this.isHidden=!1,this.trigger("show"))},hide:function(){this.isHidden||(this.el.hide(),this.isHidden=!0,this.trigger("hide"))},render:function(){var b=this,c=this.options;this.el=a('<div class="fc-popover"/>').addClass(c.className||"").css({top:0,left:0}).append(c.content).appendTo(c.parentEl),this.el.on("click",".fc-close",function(){b.hide()}),c.autoHide&&this.listenTo(a(document),"mousedown",this.documentMousedown)},documentMousedown:function(b){this.el&&!a(b.target).closest(this.el).length&&this.hide()},removeElement:function(){this.hide(),this.el&&(this.el.remove(),this.el=null),this.stopListeningTo(a(document),"mousedown")},position:function(){var h,i,j,k,l,b=this.options,c=this.el.offsetParent().offset(),d=this.el.outerWidth(),e=this.el.outerHeight(),f=a(window),g=o(this.el);k=b.top||0,l=void 0!==b.left?b.left:void 0!==b.right?b.right-d:0,g.is(window)||g.is(document)?(g=f,h=0,i=0):(j=g.offset(),h=j.top,i=j.left),h+=f.scrollTop(),i+=f.scrollLeft(),b.viewportConstrain!==!1&&(k=Math.min(k,h+g.outerHeight()-e-this.margin),k=Math.max(k,h+this.margin),l=Math.min(l,i+g.outerWidth()-d-this.margin),l=Math.max(l,i+this.margin)),this.el.css({top:k-c.top,left:l-c.left})},trigger:function(a){this.options[a]&&this.options[a].apply(this,Array.prototype.slice.call(arguments,1))}}),Ha=c.CoordCache=za.extend({els:null,forcedOffsetParentEl:null,origin:null,boundingRect:null,isHorizontal:!1,isVertical:!1,lefts:null,rights:null,tops:null,bottoms:null,constructor:function(b){this.els=a(b.els),this.isHorizontal=b.isHorizontal,this.isVertical=b.isVertical,this.forcedOffsetParentEl=b.offsetParent?a(b.offsetParent):null},build:function(){var a=this.forcedOffsetParentEl;!a&&this.els.length>0&&(a=this.els.eq(0).offsetParent()),this.origin=a?a.offset():null,this.boundingRect=this.queryBoundingRect(),this.isHorizontal&&this.buildElHorizontals(),this.isVertical&&this.buildElVerticals()},clear:function(){this.origin=null,this.boundingRect=null,this.lefts=null,this.rights=null,this.tops=null,this.bottoms=null},ensureBuilt:function(){this.origin||this.build()},buildElHorizontals:function(){var b=[],c=[];this.els.each(function(d,e){var f=a(e),g=f.offset().left,h=f.outerWidth();b.push(g),c.push(g+h)}),this.lefts=b,this.rights=c},buildElVerticals:function(){var b=[],c=[];this.els.each(function(d,e){var f=a(e),g=f.offset().top,h=f.outerHeight();b.push(g),c.push(g+h)}),this.tops=b,this.bottoms=c},getHorizontalIndex:function(a){this.ensureBuilt();var e,b=this.lefts,c=this.rights,d=b.length;for(e=0;e<d;e++)if(a>=b[e]&&a<c[e])return e},getVerticalIndex:function(a){this.ensureBuilt();var e,b=this.tops,c=this.bottoms,d=b.length;for(e=0;e<d;e++)if(a>=b[e]&&a<c[e])return e},getLeftOffset:function(a){return this.ensureBuilt(),this.lefts[a]},getLeftPosition:function(a){return this.ensureBuilt(),this.lefts[a]-this.origin.left},getRightOffset:function(a){return this.ensureBuilt(),this.rights[a]},getRightPosition:function(a){return this.ensureBuilt(),this.rights[a]-this.origin.left},getWidth:function(a){return this.ensureBuilt(),this.rights[a]-this.lefts[a]},getTopOffset:function(a){return this.ensureBuilt(),this.tops[a]},getTopPosition:function(a){return this.ensureBuilt(),this.tops[a]-this.origin.top},getBottomOffset:function(a){return this.ensureBuilt(),this.bottoms[a]},getBottomPosition:function(a){return this.ensureBuilt(),this.bottoms[a]-this.origin.top},getHeight:function(a){return this.ensureBuilt(),this.bottoms[a]-this.tops[a]},queryBoundingRect:function(){var a;return this.els.length>0&&(a=o(this.els.eq(0)),!a.is(document))?q(a):null},isPointInBounds:function(a,b){return this.isLeftInBounds(a)&&this.isTopInBounds(b)},isLeftInBounds:function(a){return!this.boundingRect||a>=this.boundingRect.left&&a<this.boundingRect.right},isTopInBounds:function(a){return!this.boundingRect||a>=this.boundingRect.top&&a<this.boundingRect.bottom}}),Ia=c.DragListener=za.extend(Fa,{options:null,subjectEl:null,originX:null,originY:null,scrollEl:null,isInteracting:!1,isDistanceSurpassed:!1,isDelayEnded:!1,isDragging:!1,isTouch:!1,delay:null,delayTimeoutId:null,minDistance:null,shouldCancelTouchScroll:!0,scrollAlwaysKills:!1,constructor:function(a){this.options=a||{}},startInteraction:function(b,c){var d=B(b);if("mousedown"===b.type){if(Ma.get().shouldIgnoreMouse())return;if(!y(b))return;b.preventDefault()}this.isInteracting||(c=c||{},this.delay=ga(c.delay,this.options.delay,0),this.minDistance=ga(c.distance,this.options.distance,0),this.subjectEl=this.options.subjectEl,C(a("body")),this.isInteracting=!0,this.isTouch=d,this.isDelayEnded=!1,this.isDistanceSurpassed=!1,this.originX=z(b),this.originY=A(b),this.scrollEl=o(a(b.target)),this.bindHandlers(),this.initAutoScroll(),this.handleInteractionStart(b),this.startDelay(b),this.minDistance||this.handleDistanceSurpassed(b))},handleInteractionStart:function(a){this.trigger("interactionStart",a)},endInteraction:function(b,c){this.isInteracting&&(this.endDrag(b),this.delayTimeoutId&&(clearTimeout(this.delayTimeoutId),this.delayTimeoutId=null),this.destroyAutoScroll(),this.unbindHandlers(),this.isInteracting=!1,this.handleInteractionEnd(b,c),D(a("body")))},handleInteractionEnd:function(a,b){this.trigger("interactionEnd",a,b||!1)},bindHandlers:function(){var a=Ma.get();this.isTouch?this.listenTo(a,{touchmove:this.handleTouchMove,touchend:this.endInteraction,scroll:this.handleTouchScroll}):this.listenTo(a,{mousemove:this.handleMouseMove,mouseup:this.endInteraction}),this.listenTo(a,{selectstart:E,contextmenu:E})},unbindHandlers:function(){this.stopListeningTo(Ma.get())},startDrag:function(a,b){this.startInteraction(a,b),this.isDragging||(this.isDragging=!0,this.handleDragStart(a))},handleDragStart:function(a){this.trigger("dragStart",a)},handleMove:function(a){var e,b=z(a)-this.originX,c=A(a)-this.originY,d=this.minDistance;this.isDistanceSurpassed||(e=b*b+c*c,e>=d*d&&this.handleDistanceSurpassed(a)),this.isDragging&&this.handleDrag(b,c,a)},handleDrag:function(a,b,c){this.trigger("drag",a,b,c),this.updateAutoScroll(c)},endDrag:function(a){this.isDragging&&(this.isDragging=!1,this.handleDragEnd(a))},handleDragEnd:function(a){this.trigger("dragEnd",a)},startDelay:function(a){var b=this;this.delay?this.delayTimeoutId=setTimeout(function(){b.handleDelayEnd(a)},this.delay):this.handleDelayEnd(a)},handleDelayEnd:function(a){this.isDelayEnded=!0,this.isDistanceSurpassed&&this.startDrag(a)},handleDistanceSurpassed:function(a){this.isDistanceSurpassed=!0,this.isDelayEnded&&this.startDrag(a)},handleTouchMove:function(a){this.isDragging&&this.shouldCancelTouchScroll&&a.preventDefault(),this.handleMove(a)},handleMouseMove:function(a){this.handleMove(a)},handleTouchScroll:function(a){this.isDragging&&!this.scrollAlwaysKills||this.endInteraction(a,!0)},trigger:function(a){this.options[a]&&this.options[a].apply(this,Array.prototype.slice.call(arguments,1)),this["_"+a]&&this["_"+a].apply(this,Array.prototype.slice.call(arguments,1))}});Ia.mixin({isAutoScroll:!1,scrollBounds:null,scrollTopVel:null,scrollLeftVel:null,scrollIntervalId:null,scrollSensitivity:30,scrollSpeed:200,scrollIntervalMs:50,initAutoScroll:function(){var a=this.scrollEl;this.isAutoScroll=this.options.scroll&&a&&!a.is(window)&&!a.is(document),this.isAutoScroll&&this.listenTo(a,"scroll",pa(this.handleDebouncedScroll,100))},destroyAutoScroll:function(){this.endAutoScroll(),this.isAutoScroll&&this.stopListeningTo(this.scrollEl,"scroll")},computeScrollBounds:function(){this.isAutoScroll&&(this.scrollBounds=p(this.scrollEl))},updateAutoScroll:function(a){var d,e,f,g,b=this.scrollSensitivity,c=this.scrollBounds,h=0,i=0;c&&(d=(b-(A(a)-c.top))/b,e=(b-(c.bottom-A(a)))/b,f=(b-(z(a)-c.left))/b,g=(b-(c.right-z(a)))/b,d>=0&&d<=1?h=d*this.scrollSpeed*-1:e>=0&&e<=1&&(h=e*this.scrollSpeed),f>=0&&f<=1?i=f*this.scrollSpeed*-1:g>=0&&g<=1&&(i=g*this.scrollSpeed)),this.setScrollVel(h,i)},setScrollVel:function(a,b){this.scrollTopVel=a,this.scrollLeftVel=b,this.constrainScrollVel(),!this.scrollTopVel&&!this.scrollLeftVel||this.scrollIntervalId||(this.scrollIntervalId=setInterval(oa(this,"scrollIntervalFunc"),this.scrollIntervalMs))},constrainScrollVel:function(){var a=this.scrollEl;this.scrollTopVel<0?a.scrollTop()<=0&&(this.scrollTopVel=0):this.scrollTopVel>0&&a.scrollTop()+a[0].clientHeight>=a[0].scrollHeight&&(this.scrollTopVel=0),this.scrollLeftVel<0?a.scrollLeft()<=0&&(this.scrollLeftVel=0):this.scrollLeftVel>0&&a.scrollLeft()+a[0].clientWidth>=a[0].scrollWidth&&(this.scrollLeftVel=0)},scrollIntervalFunc:function(){var a=this.scrollEl,b=this.scrollIntervalMs/1e3;this.scrollTopVel&&a.scrollTop(a.scrollTop()+this.scrollTopVel*b),this.scrollLeftVel&&a.scrollLeft(a.scrollLeft()+this.scrollLeftVel*b),this.constrainScrollVel(),this.scrollTopVel||this.scrollLeftVel||this.endAutoScroll()},endAutoScroll:function(){this.scrollIntervalId&&(clearInterval(this.scrollIntervalId),this.scrollIntervalId=null,this.handleScrollEnd())},handleDebouncedScroll:function(){this.scrollIntervalId||this.handleScrollEnd()},handleScrollEnd:function(){}});var Ja=Ia.extend({component:null,origHit:null,hit:null,coordAdjust:null,constructor:function(a,b){Ia.call(this,b),this.component=a},handleInteractionStart:function(a){var c,d,e,b=this.subjectEl;this.component.hitsNeeded(),this.computeScrollBounds(),a?(d={left:z(a),top:A(a)},e=d,b&&(c=p(b),e=G(e,c)),this.origHit=this.queryHit(e.left,e.top),b&&this.options.subjectCenter&&(this.origHit&&(c=F(this.origHit,c)||c),e=H(c)),this.coordAdjust=I(e,d)):(this.origHit=null,this.coordAdjust=null),Ia.prototype.handleInteractionStart.apply(this,arguments)},handleDragStart:function(a){var b;Ia.prototype.handleDragStart.apply(this,arguments),b=this.queryHit(z(a),A(a)),b&&this.handleHitOver(b)},handleDrag:function(a,b,c){var d;Ia.prototype.handleDrag.apply(this,arguments),d=this.queryHit(z(c),A(c)),Ka(d,this.hit)||(this.hit&&this.handleHitOut(),d&&this.handleHitOver(d))},handleDragEnd:function(){this.handleHitDone(),Ia.prototype.handleDragEnd.apply(this,arguments)},handleHitOver:function(a){var b=Ka(a,this.origHit);this.hit=a,this.trigger("hitOver",this.hit,b,this.origHit)},handleHitOut:function(){this.hit&&(this.trigger("hitOut",this.hit),this.handleHitDone(),this.hit=null)},handleHitDone:function(){this.hit&&this.trigger("hitDone",this.hit)},handleInteractionEnd:function(){Ia.prototype.handleInteractionEnd.apply(this,arguments),this.origHit=null,this.hit=null,this.component.hitsNotNeeded()},handleScrollEnd:function(){Ia.prototype.handleScrollEnd.apply(this,arguments),this.isDragging&&(this.component.releaseHits(),this.component.prepareHits())},queryHit:function(a,b){return this.coordAdjust&&(a+=this.coordAdjust.left,b+=this.coordAdjust.top),this.component.queryHit(a,b)}});c.touchMouseIgnoreWait=500;var Ma=za.extend(Fa,Ea,{isTouching:!1,mouseIgnoreDepth:0,handleScrollProxy:null,bind:function(){var b=this;this.listenTo(a(document),{touchstart:this.handleTouchStart,touchcancel:this.handleTouchCancel,touchend:this.handleTouchEnd,mousedown:this.handleMouseDown,mousemove:this.handleMouseMove,mouseup:this.handleMouseUp,click:this.handleClick,selectstart:this.handleSelectStart,contextmenu:this.handleContextMenu}),window.addEventListener("touchmove",this.handleTouchMoveProxy=function(c){b.handleTouchMove(a.Event(c))},{passive:!1}),window.addEventListener("scroll",this.handleScrollProxy=function(c){b.handleScroll(a.Event(c))},!0)},unbind:function(){this.stopListeningTo(a(document)),window.removeEventListener("touchmove",this.handleTouchMoveProxy),window.removeEventListener("scroll",this.handleScrollProxy,!0)},handleTouchStart:function(a){this.stopTouch(a,!0),this.isTouching=!0,this.trigger("touchstart",a)},handleTouchMove:function(a){this.isTouching&&this.trigger("touchmove",a)},handleTouchCancel:function(a){this.isTouching&&(this.trigger("touchcancel",a),this.stopTouch(a))},handleTouchEnd:function(a){this.stopTouch(a)},handleMouseDown:function(a){this.shouldIgnoreMouse()||this.trigger("mousedown",a)},handleMouseMove:function(a){this.shouldIgnoreMouse()||this.trigger("mousemove",a)},handleMouseUp:function(a){this.shouldIgnoreMouse()||this.trigger("mouseup",a)},handleClick:function(a){this.shouldIgnoreMouse()||this.trigger("click",a)},handleSelectStart:function(a){this.trigger("selectstart",a)},handleContextMenu:function(a){this.trigger("contextmenu",a)},handleScroll:function(a){this.trigger("scroll",a)},stopTouch:function(a,b){this.isTouching&&(this.isTouching=!1,this.trigger("touchend",a),b||this.startTouchMouseIgnore())},startTouchMouseIgnore:function(){var a=this,b=c.touchMouseIgnoreWait;b&&(this.mouseIgnoreDepth++,setTimeout(function(){a.mouseIgnoreDepth--},b))},shouldIgnoreMouse:function(){return this.isTouching||Boolean(this.mouseIgnoreDepth)}});!function(){var a=null,b=0;Ma.get=function(){return a||(a=new Ma,a.bind()),a},Ma.needed=function(){Ma.get(),b++},Ma.unneeded=function(){b--,b||(a.unbind(),a=null)}}();var Na=za.extend(Fa,{options:null,sourceEl:null,el:null,parentEl:null,top0:null,left0:null,y0:null,x0:null,topDelta:null,leftDelta:null,isFollowing:!1,isHidden:!1,isAnimating:!1,constructor:function(b,c){this.options=c=c||{},this.sourceEl=b,this.parentEl=c.parentEl?a(c.parentEl):b.parent()},start:function(b){this.isFollowing||(this.isFollowing=!0,this.y0=A(b),this.x0=z(b),this.topDelta=0,this.leftDelta=0,this.isHidden||this.updatePosition(),B(b)?this.listenTo(a(document),"touchmove",this.handleMove):this.listenTo(a(document),"mousemove",this.handleMove))},stop:function(b,c){function f(){d.isAnimating=!1,d.removeElement(),d.top0=d.left0=null,c&&c()}var d=this,e=this.options.revertDuration;this.isFollowing&&!this.isAnimating&&(this.isFollowing=!1,this.stopListeningTo(a(document)),b&&e&&!this.isHidden?(this.isAnimating=!0,this.el.animate({top:this.top0,left:this.left0},{duration:e,complete:f})):f())},getEl:function(){var a=this.el;return a||(a=this.el=this.sourceEl.clone().addClass(this.options.additionalClass||"").css({position:"absolute",visibility:"",display:this.isHidden?"none":"",margin:0,right:"auto",bottom:"auto",width:this.sourceEl.width(),height:this.sourceEl.height(),opacity:this.options.opacity||"",zIndex:this.options.zIndex}),a.addClass("fc-unselectable"),a.appendTo(this.parentEl)),a},removeElement:function(){this.el&&(this.el.remove(),this.el=null)},updatePosition:function(){var a,b;this.getEl(),null===this.top0&&(a=this.sourceEl.offset(),b=this.el.offsetParent().offset(),this.top0=a.top-b.top,this.left0=a.left-b.left),this.el.css({top:this.top0+this.topDelta,left:this.left0+this.leftDelta})},handleMove:function(a){this.topDelta=A(a)-this.y0,this.leftDelta=z(a)-this.x0,this.isHidden||this.updatePosition()},hide:function(){this.isHidden||(this.isHidden=!0,this.el&&this.el.hide())},show:function(){this.isHidden&&(this.isHidden=!1,this.updatePosition(),this.getEl().show())}}),Oa=c.Grid=za.extend(Fa,{hasDayInteractions:!0,view:null,isRTL:null,start:null,end:null,el:null,elsByFill:null,eventTimeFormat:null,displayEventTime:null,displayEventEnd:null,minResizeDuration:null,largeUnit:null,dayClickListener:null,daySelectListener:null,segDragListener:null,segResizeListener:null,externalDragListener:null,constructor:function(a){this.view=a,this.isRTL=a.opt("isRTL"),this.elsByFill={},this.dayClickListener=this.buildDayClickListener(),this.daySelectListener=this.buildDaySelectListener()},computeEventTimeFormat:function(){return this.view.opt("smallTimeFormat")},computeDisplayEventTime:function(){return!0},computeDisplayEventEnd:function(){return!0},setRange:function(a){this.start=a.start.clone(),this.end=a.end.clone(),this.rangeUpdated(),this.processRangeOptions()},rangeUpdated:function(){},processRangeOptions:function(){var b,c,a=this.view;this.eventTimeFormat=a.opt("eventTimeFormat")||a.opt("timeFormat")||this.computeEventTimeFormat(),b=a.opt("displayEventTime"),null==b&&(b=this.computeDisplayEventTime()),c=a.opt("displayEventEnd"),null==c&&(c=this.computeDisplayEventEnd()),this.displayEventTime=b,this.displayEventEnd=c},spanToSegs:function(a){},diffDates:function(a,b){return this.largeUnit?S(a,b,this.largeUnit):Q(a,b)},hitsNeededDepth:0,hitsNeeded:function(){this.hitsNeededDepth++||this.prepareHits()},hitsNotNeeded:function(){this.hitsNeededDepth&&!--this.hitsNeededDepth&&this.releaseHits()},prepareHits:function(){},releaseHits:function(){},queryHit:function(a,b){},getHitSpan:function(a){},getHitEl:function(a){},setElement:function(a){this.el=a,this.hasDayInteractions&&(C(a),this.bindDayHandler("touchstart",this.dayTouchStart),this.bindDayHandler("mousedown",this.dayMousedown)),this.bindSegHandlers(),this.bindGlobalHandlers()},bindDayHandler:function(b,c){var d=this;this.el.on(b,function(b){if(!a(b.target).is(d.segSelector+","+d.segSelector+" *,.fc-more,a[data-goto]"))return c.call(d,b)})},removeElement:function(){this.unbindGlobalHandlers(),this.clearDragListeners(),this.el.remove()},renderSkeleton:function(){},renderDates:function(){},unrenderDates:function(){},bindGlobalHandlers:function(){this.listenTo(a(document),{dragstart:this.externalDragStart,sortstart:this.externalDragStart})},unbindGlobalHandlers:function(){this.stopListeningTo(a(document))},dayMousedown:function(a){var b=this.view;b.isSelected||b.selectedEvent||(this.dayClickListener.startInteraction(a),b.opt("selectable")&&this.daySelectListener.startInteraction(a,{distance:b.opt("selectMinDistance")}))},dayTouchStart:function(a){var c,b=this.view;b.isSelected||b.selectedEvent||(c=b.opt("selectLongPressDelay"),null==c&&(c=b.opt("longPressDelay")),this.dayClickListener.startInteraction(a),b.opt("selectable")&&this.daySelectListener.startInteraction(a,{delay:c}))},buildDayClickListener:function(){var c,a=this,b=this.view,d=new Ja(this,{scroll:b.opt("dragScroll"),interactionStart:function(){c=d.origHit},hitOver:function(a,b,d){b||(c=null)},hitOut:function(){c=null},interactionEnd:function(d,e){!e&&c&&b.triggerDayClick(a.getHitSpan(c),a.getHitEl(c),d)}});return d.shouldCancelTouchScroll=!1,d.scrollAlwaysKills=!0,d},buildDaySelectListener:function(){var c,a=this,b=this.view,d=new Ja(this,{scroll:b.opt("dragScroll"),interactionStart:function(){c=null},dragStart:function(){b.unselect()},hitOver:function(b,d,e){e&&(c=a.computeSelection(a.getHitSpan(e),a.getHitSpan(b)),c?a.renderSelection(c):c===!1&&i())},hitOut:function(){c=null,a.unrenderSelection()},hitDone:function(){j()},interactionEnd:function(a,d){!d&&c&&b.reportSelection(c,a)}});return d},clearDragListeners:function(){this.dayClickListener.endInteraction(),this.daySelectListener.endInteraction(),this.segDragListener&&this.segDragListener.endInteraction(),this.segResizeListener&&this.segResizeListener.endInteraction(),this.externalDragListener&&this.externalDragListener.endInteraction()},renderEventLocationHelper:function(a,b){var c=this.fabricateHelperEvent(a,b);return this.renderHelper(c,b)},fabricateHelperEvent:function(a,b){var c=b?ba(b.event):{};return c.start=a.start.clone(),c.end=a.end?a.end.clone():null,c.allDay=null,this.view.calendar.normalizeEventDates(c),c.className=(c.className||[]).concat("fc-helper"),b||(c.editable=!1),c},renderHelper:function(a,b){},unrenderHelper:function(){},renderSelection:function(a){this.renderHighlight(a)},unrenderSelection:function(){this.unrenderHighlight()},computeSelection:function(a,b){var c=this.computeSelectionSpan(a,b);return!(c&&!this.view.calendar.isSelectionSpanAllowed(c))&&c},computeSelectionSpan:function(a,b){var c=[a.start,a.end,b.start,b.end];return c.sort(ma),{start:c[0].clone(),end:c[3].clone()}},renderHighlight:function(a){this.renderFill("highlight",this.spanToSegs(a))},unrenderHighlight:function(){this.unrenderFill("highlight")},highlightSegClasses:function(){return["fc-highlight"]},renderBusinessHours:function(){},unrenderBusinessHours:function(){},getNowIndicatorUnit:function(){},renderNowIndicator:function(a){},unrenderNowIndicator:function(){},renderFill:function(a,b){},unrenderFill:function(a){var b=this.elsByFill[a];b&&(b.remove(),delete this.elsByFill[a])},renderFillSegEls:function(b,c){var h,d=this,e=this[b+"SegEl"],f="",g=[];if(c.length){for(h=0;h<c.length;h++)f+=this.fillSegHtml(b,c[h]);a(f).each(function(b,f){var h=c[b],i=a(f);e&&(i=e.call(d,h,i)),i&&(i=a(i),i.is(d.fillSegTag)&&(h.el=i,g.push(h)))})}return g},fillSegTag:"div",fillSegHtml:function(a,b){var c=this[a+"SegClasses"],d=this[a+"SegCss"],e=c?c.call(this,b):[],f=ja(d?d.call(this,b):{});return"<"+this.fillSegTag+(e.length?' class="'+e.join(" ")+'"':"")+(f?' style="'+f+'"':"")+" />"},getDayClasses:function(a,b){var c=this.view,d=c.calendar.getNow(),e=["fc-"+O[a.day()]];return 1==c.intervalDuration.as("months")&&a.month()!=c.intervalStart.month()&&e.push("fc-other-month"),a.isSame(d,"day")?(e.push("fc-today"),b!==!0&&e.push(c.highlightStateClass)):a<d?e.push("fc-past"):e.push("fc-future"),e}});Oa.mixin({segSelector:".fc-event-container > *",mousedOverSeg:null,isDraggingSeg:!1,isResizingSeg:!1,isDraggingExternal:!1,segs:null,renderEvents:function(a){var d,b=[],c=[];for(d=0;d<a.length;d++)(Qa(a[d])?b:c).push(a[d]);this.segs=[].concat(this.renderBgEvents(b),this.renderFgEvents(c))},renderBgEvents:function(a){var b=this.eventsToSegs(a);return this.renderBgSegs(b)||b},renderFgEvents:function(a){var b=this.eventsToSegs(a);return this.renderFgSegs(b)||b},unrenderEvents:function(){this.handleSegMouseout(),this.clearDragListeners(),this.unrenderFgSegs(),this.unrenderBgSegs(),this.segs=null},getEventSegs:function(){return this.segs||[]},renderFgSegs:function(a){},unrenderFgSegs:function(){},renderFgSegEls:function(b,c){var g,d=this.view,e="",f=[];if(b.length){for(g=0;g<b.length;g++)e+=this.fgSegHtml(b[g],c);a(e).each(function(c,e){var g=b[c],h=d.resolveEventEl(g.event,a(e));h&&(h.data("fc-seg",g),g.el=h,f.push(g))})}return f},fgSegHtml:function(a,b){},renderBgSegs:function(a){return this.renderFill("bgEvent",a)},unrenderBgSegs:function(){this.unrenderFill("bgEvent")},bgEventSegEl:function(a,b){return this.view.resolveEventEl(a.event,b)},bgEventSegClasses:function(a){var b=a.event,c=b.source||{};return["fc-bgevent"].concat(b.className,c.className||[])},bgEventSegCss:function(a){return{"background-color":this.getSegSkinCss(a)["background-color"]}},businessHoursSegClasses:function(a){return["fc-nonbusiness","fc-bgevent"]},buildBusinessHourSegs:function(a,b){return this.eventsToSegs(this.buildBusinessHourEvents(a,b))},buildBusinessHourEvents:function(b,c){var e,d=this.view.calendar;return null==c&&(c=d.options.businessHours),e=d.computeBusinessHourEvents(b,c),!e.length&&c&&(e=[a.extend({},ub,{start:this.view.end,end:this.view.end,dow:null})]),e},bindSegHandlers:function(){this.bindSegHandlersToEl(this.el)},bindSegHandlersToEl:function(a){this.bindSegHandlerToEl(a,"touchstart",this.handleSegTouchStart),this.bindSegHandlerToEl(a,"mouseenter",this.handleSegMouseover),this.bindSegHandlerToEl(a,"mouseleave",this.handleSegMouseout),this.bindSegHandlerToEl(a,"mousedown",this.handleSegMousedown),this.bindSegHandlerToEl(a,"click",this.handleSegClick)},bindSegHandlerToEl:function(b,c,d){var e=this;b.on(c,this.segSelector,function(b){var c=a(this).data("fc-seg");if(c&&!e.isDraggingSeg&&!e.isResizingSeg)return d.call(e,c,b)})},handleSegClick:function(a,b){var c=this.view.publiclyTrigger("eventClick",a.el[0],a.event,b);c===!1&&b.preventDefault()},handleSegMouseover:function(a,b){Ma.get().shouldIgnoreMouse()||this.mousedOverSeg||(this.mousedOverSeg=a,this.view.isEventResizable(a.event)&&a.el.addClass("fc-allow-mouse-resize"),this.view.publiclyTrigger("eventMouseover",a.el[0],a.event,b))},handleSegMouseout:function(a,b){b=b||{},this.mousedOverSeg&&(a=a||this.mousedOverSeg,this.mousedOverSeg=null,this.view.isEventResizable(a.event)&&a.el.removeClass("fc-allow-mouse-resize"),this.view.publiclyTrigger("eventMouseout",a.el[0],a.event,b))},handleSegMousedown:function(a,b){var c=this.startSegResize(a,b,{distance:5});!c&&this.view.isEventDraggable(a.event)&&this.buildSegDragListener(a).startInteraction(b,{distance:5})},handleSegTouchStart:function(a,b){var i,j,c=this.view,d=a.event,e=c.isEventSelected(d),f=c.isEventDraggable(d),g=c.isEventResizable(d),h=!1;e&&g&&(h=this.startSegResize(a,b)),h||!f&&!g||(j=c.opt("eventLongPressDelay"),null==j&&(j=c.opt("longPressDelay")),i=f?this.buildSegDragListener(a):this.buildSegSelectListener(a),i.startInteraction(b,{delay:e?0:j}))},startSegResize:function(b,c,d){return!!a(c.target).is(".fc-resizer")&&(this.buildSegResizeListener(b,a(c.target).is(".fc-start-resizer")).startInteraction(c,d),!0)},buildSegDragListener:function(a){var g,h,k,b=this,c=this.view,d=c.calendar,e=a.el,f=a.event;if(this.segDragListener)return this.segDragListener;var l=this.segDragListener=new Ja(c,{scroll:c.opt("dragScroll"),subjectEl:e,subjectCenter:!0,interactionStart:function(d){a.component=b,g=!1,h=new Na(a.el,{additionalClass:"fc-dragging",parentEl:c.el,opacity:l.isTouch?null:c.opt("dragOpacity"),revertDuration:c.opt("dragRevertDuration"),zIndex:2}),h.hide(),h.start(d)},dragStart:function(d){l.isTouch&&!c.isEventSelected(f)&&c.selectEvent(f),g=!0,b.handleSegMouseout(a,d),b.segDragStart(a,d),c.hideEvent(f)},hitOver:function(e,g,j){var m;a.hit&&(j=a.hit),k=b.computeEventDrop(j.component.getHitSpan(j),e.component.getHitSpan(e),f),k&&!d.isEventSpanAllowed(b.eventToSpan(k),f)&&(i(),k=null),k&&(m=c.renderDrag(k,a))?(m.addClass("fc-dragging"),l.isTouch||b.applyDragOpacity(m),h.hide()):h.show(),g&&(k=null)},hitOut:function(){c.unrenderDrag(),h.show(),k=null},hitDone:function(){j()},interactionEnd:function(d){delete a.component,h.stop(!k,function(){g&&(c.unrenderDrag(),b.segDragStop(a,d)),k?c.reportSegDrop(a,k,b.largeUnit,e,d):c.showEvent(f)}),b.segDragListener=null}});return l},buildSegSelectListener:function(a){var b=this,c=this.view,d=a.event;if(this.segDragListener)return this.segDragListener;var e=this.segDragListener=new Ia({dragStart:function(a){e.isTouch&&!c.isEventSelected(d)&&c.selectEvent(d)},interactionEnd:function(a){b.segDragListener=null}});return e},segDragStart:function(a,b){this.isDraggingSeg=!0,this.view.publiclyTrigger("eventDragStart",a.el[0],a.event,b,{})},segDragStop:function(a,b){this.isDraggingSeg=!1,this.view.publiclyTrigger("eventDragStop",a.el[0],a.event,b,{})},computeEventDrop:function(a,b,c){var g,h,d=this.view.calendar,e=a.start,f=b.start;return e.hasTime()===f.hasTime()?(g=this.diffDates(f,e),c.allDay&&Y(g)?(h={start:c.start.clone(),end:d.getEventEnd(c),allDay:!1},d.normalizeEventTimes(h)):h=Pa(c),h.start.add(g),h.end&&h.end.add(g)):h={start:f.clone(),end:null,allDay:!f.hasTime()},h},applyDragOpacity:function(a){var b=this.view.opt("dragOpacity");null!=b&&a.css("opacity",b)},externalDragStart:function(b,c){var e,f,d=this.view;d.opt("droppable")&&(e=a((c?c.item:null)||b.target),f=d.opt("dropAccept"),(a.isFunction(f)?f.call(e[0],e):e.is(f))&&(this.isDraggingExternal||this.listenToExternalDrag(e,b,c)))},listenToExternalDrag:function(a,b,c){var g,d=this,e=this.view.calendar,f=Va(a),h=d.externalDragListener=new Ja(this,{interactionStart:function(){d.isDraggingExternal=!0},hitOver:function(a){g=d.computeExternalDrop(a.component.getHitSpan(a),f),g&&!e.isExternalSpanAllowed(d.eventToSpan(g),g,f.eventProps)&&(i(),g=null),g&&d.renderDrag(g)},hitOut:function(){g=null},hitDone:function(){j(),d.unrenderDrag()},interactionEnd:function(b){g&&d.view.reportExternalDrop(f,g,a,b,c),d.isDraggingExternal=!1,d.externalDragListener=null}});h.startDrag(b)},computeExternalDrop:function(a,b){var c=this.view.calendar,d={start:c.applyTimezone(a.start),end:null};return b.startTime&&!d.start.hasTime()&&d.start.time(b.startTime),b.duration&&(d.end=d.start.clone().add(b.duration)),d},renderDrag:function(a,b){},unrenderDrag:function(){},buildSegResizeListener:function(a,b){var k,l,c=this,d=this.view,e=d.calendar,f=a.el,g=a.event,h=e.getEventEnd(g),m=this.segResizeListener=new Ja(this,{scroll:d.opt("dragScroll"),subjectEl:f,interactionStart:function(){k=!1},dragStart:function(b){k=!0,c.handleSegMouseout(a,b),c.segResizeStart(a,b)},hitOver:function(f,j,k){var m=c.getHitSpan(k),n=c.getHitSpan(f);l=b?c.computeEventStartResize(m,n,g):c.computeEventEndResize(m,n,g),l&&(e.isEventSpanAllowed(c.eventToSpan(l),g)?l.start.isSame(g.start.clone().stripZone())&&l.end.isSame(h.clone().stripZone())&&(l=null):(i(),l=null)),l&&(d.hideEvent(g),c.renderEventResize(l,a))},hitOut:function(){l=null,d.showEvent(g)},hitDone:function(){c.unrenderEventResize(),j()},interactionEnd:function(b){k&&c.segResizeStop(a,b),l?d.reportSegResize(a,l,c.largeUnit,f,b):d.showEvent(g),c.segResizeListener=null}});return m},segResizeStart:function(a,b){this.isResizingSeg=!0,this.view.publiclyTrigger("eventResizeStart",a.el[0],a.event,b,{})},segResizeStop:function(a,b){this.isResizingSeg=!1,this.view.publiclyTrigger("eventResizeStop",a.el[0],a.event,b,{})},computeEventStartResize:function(a,b,c){return this.computeEventResize("start",a,b,c)},computeEventEndResize:function(a,b,c){return this.computeEventResize("end",a,b,c)},computeEventResize:function(a,b,c,d){var g,h,e=this.view.calendar,f=this.diffDates(c[a],b[a]);return g={start:d.start.clone(),end:e.getEventEnd(d),allDay:d.allDay},g.allDay&&Y(f)&&(g.allDay=!1,e.normalizeEventTimes(g)),g[a].add(f),g.start.isBefore(g.end)||(h=this.minResizeDuration||(d.allDay?e.defaultAllDayEventDuration:e.defaultTimedEventDuration),"start"==a?g.start=g.end.clone().subtract(h):g.end=g.start.clone().add(h)),g},renderEventResize:function(a,b){},unrenderEventResize:function(){},
getEventTimeText:function(a,b,c){return null==b&&(b=this.eventTimeFormat),null==c&&(c=this.displayEventEnd),this.displayEventTime&&a.start.hasTime()?c&&a.end?this.view.formatRange(a,b):a.start.format(b):""},getSegClasses:function(a,b,c){var d=this.view,e=["fc-event",a.isStart?"fc-start":"fc-not-start",a.isEnd?"fc-end":"fc-not-end"].concat(this.getSegCustomClasses(a));return b&&e.push("fc-draggable"),c&&e.push("fc-resizable"),d.isEventSelected(a.event)&&e.push("fc-selected"),e},getSegCustomClasses:function(a){var b=a.event;return[].concat(b.className,b.source?b.source.className:[])},getSegSkinCss:function(a){return{"background-color":this.getSegBackgroundColor(a),"border-color":this.getSegBorderColor(a),color:this.getSegTextColor(a)}},getSegBackgroundColor:function(a){return a.event.backgroundColor||a.event.color||this.getSegDefaultBackgroundColor(a)},getSegDefaultBackgroundColor:function(a){var b=a.event.source||{};return b.backgroundColor||b.color||this.view.opt("eventBackgroundColor")||this.view.opt("eventColor")},getSegBorderColor:function(a){return a.event.borderColor||a.event.color||this.getSegDefaultBorderColor(a)},getSegDefaultBorderColor:function(a){var b=a.event.source||{};return b.borderColor||b.color||this.view.opt("eventBorderColor")||this.view.opt("eventColor")},getSegTextColor:function(a){return a.event.textColor||this.getSegDefaultTextColor(a)},getSegDefaultTextColor:function(a){var b=a.event.source||{};return b.textColor||this.view.opt("eventTextColor")},eventToSegs:function(a){return this.eventsToSegs([a])},eventToSpan:function(a){return this.eventToSpans(a)[0]},eventToSpans:function(a){var b=this.eventToRange(a);return this.eventRangeToSpans(b,a)},eventsToSegs:function(b,c){var d=this,e=Ta(b),f=[];return a.each(e,function(a,b){var g,e=[];for(g=0;g<b.length;g++)e.push(d.eventToRange(b[g]));if(Ra(b[0]))for(e=d.invertRanges(e),g=0;g<e.length;g++)f.push.apply(f,d.eventRangeToSegs(e[g],b[0],c));else for(g=0;g<e.length;g++)f.push.apply(f,d.eventRangeToSegs(e[g],b[g],c))}),f},eventToRange:function(a){var b=this.view.calendar,c=a.start.clone().stripZone(),d=(a.end?a.end.clone():b.getDefaultEventEnd(null!=a.allDay?a.allDay:!a.start.hasTime(),a.start)).stripZone();return b.localizeMoment(c),b.localizeMoment(d),{start:c,end:d}},eventRangeToSegs:function(a,b,c){var f,d=this.eventRangeToSpans(a,b),e=[];for(f=0;f<d.length;f++)e.push.apply(e,this.eventSpanToSegs(d[f],b,c));return e},eventRangeToSpans:function(b,c){return[a.extend({},b)]},eventSpanToSegs:function(a,b,c){var e,f,d=c?c(a):this.spanToSegs(a);for(e=0;e<d.length;e++)f=d[e],f.event=b,f.eventStartMS=+a.start,f.eventDurationMS=a.end-a.start;return d},invertRanges:function(a){var g,h,b=this.view,c=b.start.clone(),d=b.end.clone(),e=[],f=c;for(a.sort(Ua),g=0;g<a.length;g++)h=a[g],h.start>f&&e.push({start:f,end:h.start}),f=h.end;return f<d&&e.push({start:f,end:d}),e},sortEventSegs:function(a){a.sort(oa(this,"compareEventSegs"))},compareEventSegs:function(a,b){return a.eventStartMS-b.eventStartMS||b.eventDurationMS-a.eventDurationMS||b.event.allDay-a.event.allDay||K(a.event,b.event,this.view.eventOrderSpecs)}}),c.pluckEventDateProps=Pa,c.isBgEvent=Qa,c.dataAttrPrefix="";var Wa=c.DayTableMixin={breakOnWeeks:!1,dayDates:null,dayIndices:null,daysPerRow:null,rowCnt:null,colCnt:null,colHeadFormat:null,updateDayTable:function(){for(var f,g,h,a=this.view,b=this.start.clone(),c=-1,d=[],e=[];b.isBefore(this.end);)a.isHiddenDay(b)?d.push(c+.5):(c++,d.push(c),e.push(b.clone())),b.add(1,"days");if(this.breakOnWeeks){for(g=e[0].day(),f=1;f<e.length&&e[f].day()!=g;f++);h=Math.ceil(e.length/f)}else h=1,f=e.length;this.dayDates=e,this.dayIndices=d,this.daysPerRow=f,this.rowCnt=h,this.updateDayTableCols()},updateDayTableCols:function(){this.colCnt=this.computeColCnt(),this.colHeadFormat=this.view.opt("columnFormat")||this.computeColHeadFormat()},computeColCnt:function(){return this.daysPerRow},getCellDate:function(a,b){return this.dayDates[this.getCellDayIndex(a,b)].clone()},getCellRange:function(a,b){var c=this.getCellDate(a,b),d=c.clone().add(1,"days");return{start:c,end:d}},getCellDayIndex:function(a,b){return a*this.daysPerRow+this.getColDayIndex(b)},getColDayIndex:function(a){return this.isRTL?this.colCnt-1-a:a},getDateDayIndex:function(a){var b=this.dayIndices,c=a.diff(this.start,"days");return c<0?b[0]-1:c>=b.length?b[b.length-1]+1:b[c]},computeColHeadFormat:function(){return this.rowCnt>1||this.colCnt>10?"ddd":this.colCnt>1?this.view.opt("dayOfMonthFormat"):"dddd"},sliceRangeByRow:function(a){var g,h,i,j,k,b=this.daysPerRow,c=this.view.computeDayRange(a),d=this.getDateDayIndex(c.start),e=this.getDateDayIndex(c.end.clone().subtract(1,"days")),f=[];for(g=0;g<this.rowCnt;g++)h=g*b,i=h+b-1,j=Math.max(d,h),k=Math.min(e,i),j=Math.ceil(j),k=Math.floor(k),j<=k&&f.push({row:g,firstRowDayIndex:j-h,lastRowDayIndex:k-h,isStart:j===d,isEnd:k===e});return f},sliceRangeByDay:function(a){var g,h,i,j,k,l,b=this.daysPerRow,c=this.view.computeDayRange(a),d=this.getDateDayIndex(c.start),e=this.getDateDayIndex(c.end.clone().subtract(1,"days")),f=[];for(g=0;g<this.rowCnt;g++)for(h=g*b,i=h+b-1,j=h;j<=i;j++)k=Math.max(d,j),l=Math.min(e,j),k=Math.ceil(k),l=Math.floor(l),k<=l&&f.push({row:g,firstRowDayIndex:k-h,lastRowDayIndex:l-h,isStart:k===d,isEnd:l===e});return f},renderHeadHtml:function(){var a=this.view;return'<div class="fc-row '+a.widgetHeaderClass+'"><table><thead>'+this.renderHeadTrHtml()+"</thead></table></div>"},renderHeadIntroHtml:function(){return this.renderIntroHtml()},renderHeadTrHtml:function(){return"<tr>"+(this.isRTL?"":this.renderHeadIntroHtml())+this.renderHeadDateCellsHtml()+(this.isRTL?this.renderHeadIntroHtml():"")+"</tr>"},renderHeadDateCellsHtml:function(){var b,c,a=[];for(b=0;b<this.colCnt;b++)c=this.getCellDate(0,b),a.push(this.renderHeadDateCellHtml(c));return a.join("")},renderHeadDateCellHtml:function(a,b,c){var d=this.view,e=["fc-day-header",d.widgetHeaderClass];return 1===this.rowCnt?e=e.concat(this.getDayClasses(a,!0)):e.push("fc-"+O[a.day()]),'<th class="'+e.join(" ")+'"'+(1===this.rowCnt?' data-date="'+a.format("YYYY-MM-DD")+'"':"")+(b>1?' colspan="'+b+'"':"")+(c?" "+c:"")+">"+d.buildGotoAnchorHtml({date:a,forceOff:this.rowCnt>1||1===this.colCnt},ha(a.format(this.colHeadFormat)))+"</th>"},renderBgTrHtml:function(a){return"<tr>"+(this.isRTL?"":this.renderBgIntroHtml(a))+this.renderBgCellsHtml(a)+(this.isRTL?this.renderBgIntroHtml(a):"")+"</tr>"},renderBgIntroHtml:function(a){return this.renderIntroHtml()},renderBgCellsHtml:function(a){var c,d,b=[];for(c=0;c<this.colCnt;c++)d=this.getCellDate(a,c),b.push(this.renderBgCellHtml(d));return b.join("")},renderBgCellHtml:function(a,b){var c=this.view,d=this.getDayClasses(a);return d.unshift("fc-day",c.widgetContentClass),'<td class="'+d.join(" ")+'" data-date="'+a.format("YYYY-MM-DD")+'"'+(b?" "+b:"")+"></td>"},renderIntroHtml:function(){},bookendCells:function(a){var b=this.renderIntroHtml();b&&(this.isRTL?a.append(b):a.prepend(b))}},Xa=c.DayGrid=Oa.extend(Wa,{numbersVisible:!1,bottomCoordPadding:0,rowEls:null,cellEls:null,helperEls:null,rowCoordCache:null,colCoordCache:null,renderDates:function(a){var f,g,b=this.view,c=this.rowCnt,d=this.colCnt,e="";for(f=0;f<c;f++)e+=this.renderDayRowHtml(f,a);for(this.el.html(e),this.rowEls=this.el.find(".fc-row"),this.cellEls=this.el.find(".fc-day"),this.rowCoordCache=new Ha({els:this.rowEls,isVertical:!0}),this.colCoordCache=new Ha({els:this.cellEls.slice(0,this.colCnt),isHorizontal:!0}),f=0;f<c;f++)for(g=0;g<d;g++)b.publiclyTrigger("dayRender",null,this.getCellDate(f,g),this.getCellEl(f,g))},unrenderDates:function(){this.removeSegPopover()},renderBusinessHours:function(){var a=this.buildBusinessHourSegs(!0);this.renderFill("businessHours",a,"bgevent")},unrenderBusinessHours:function(){this.unrenderFill("businessHours")},renderDayRowHtml:function(a,b){var c=this.view,d=["fc-row","fc-week",c.widgetContentClass];return b&&d.push("fc-rigid"),'<div class="'+d.join(" ")+'"><div class="fc-bg"><table>'+this.renderBgTrHtml(a)+'</table></div><div class="fc-content-skeleton"><table>'+(this.numbersVisible?"<thead>"+this.renderNumberTrHtml(a)+"</thead>":"")+"</table></div></div>"},renderNumberTrHtml:function(a){return"<tr>"+(this.isRTL?"":this.renderNumberIntroHtml(a))+this.renderNumberCellsHtml(a)+(this.isRTL?this.renderNumberIntroHtml(a):"")+"</tr>"},renderNumberIntroHtml:function(a){return this.renderIntroHtml()},renderNumberCellsHtml:function(a){var c,d,b=[];for(c=0;c<this.colCnt;c++)d=this.getCellDate(a,c),b.push(this.renderNumberCellHtml(d));return b.join("")},renderNumberCellHtml:function(a){var c,d,b="";return this.view.dayNumbersVisible||this.view.cellWeekNumbersVisible?(c=this.getDayClasses(a),c.unshift("fc-day-top"),this.view.cellWeekNumbersVisible&&(d="ISO"===a._locale._fullCalendar_weekCalc?1:a._locale.firstDayOfWeek()),b+='<td class="'+c.join(" ")+'" data-date="'+a.format()+'">',this.view.cellWeekNumbersVisible&&a.day()==d&&(b+=this.view.buildGotoAnchorHtml({date:a,type:"week"},{class:"fc-week-number"},a.format("w"))),this.view.dayNumbersVisible&&(b+=this.view.buildGotoAnchorHtml(a,{class:"fc-day-number"},a.date())),b+="</td>"):"<td/>"},computeEventTimeFormat:function(){return this.view.opt("extraSmallTimeFormat")},computeDisplayEventEnd:function(){return 1==this.colCnt},rangeUpdated:function(){this.updateDayTable()},spanToSegs:function(a){var c,d,b=this.sliceRangeByRow(a);for(c=0;c<b.length;c++)d=b[c],this.isRTL?(d.leftCol=this.daysPerRow-1-d.lastRowDayIndex,d.rightCol=this.daysPerRow-1-d.firstRowDayIndex):(d.leftCol=d.firstRowDayIndex,d.rightCol=d.lastRowDayIndex);return b},prepareHits:function(){this.colCoordCache.build(),this.rowCoordCache.build(),this.rowCoordCache.bottoms[this.rowCnt-1]+=this.bottomCoordPadding},releaseHits:function(){this.colCoordCache.clear(),this.rowCoordCache.clear()},queryHit:function(a,b){if(this.colCoordCache.isLeftInBounds(a)&&this.rowCoordCache.isTopInBounds(b)){var c=this.colCoordCache.getHorizontalIndex(a),d=this.rowCoordCache.getVerticalIndex(b);if(null!=d&&null!=c)return this.getCellHit(d,c)}},getHitSpan:function(a){return this.getCellRange(a.row,a.col)},getHitEl:function(a){return this.getCellEl(a.row,a.col)},getCellHit:function(a,b){return{row:a,col:b,component:this,left:this.colCoordCache.getLeftOffset(b),right:this.colCoordCache.getRightOffset(b),top:this.rowCoordCache.getTopOffset(a),bottom:this.rowCoordCache.getBottomOffset(a)}},getCellEl:function(a,b){return this.cellEls.eq(a*this.colCnt+b)},renderDrag:function(a,b){if(this.renderHighlight(this.eventToSpan(a)),b&&b.component!==this)return this.renderEventLocationHelper(a,b)},unrenderDrag:function(){this.unrenderHighlight(),this.unrenderHelper()},renderEventResize:function(a,b){return this.renderHighlight(this.eventToSpan(a)),this.renderEventLocationHelper(a,b)},unrenderEventResize:function(){this.unrenderHighlight(),this.unrenderHelper()},renderHelper:function(b,c){var f,d=[],e=this.eventToSegs(b);return e=this.renderFgSegEls(e),f=this.renderSegRows(e),this.rowEls.each(function(b,e){var i,g=a(e),h=a('<div class="fc-helper-skeleton"><table/></div>');i=c&&c.row===b?c.el.position().top:g.find(".fc-content-skeleton tbody").position().top,h.css("top",i).find("table").append(f[b].tbodyEl),g.append(h),d.push(h[0])}),this.helperEls=a(d)},unrenderHelper:function(){this.helperEls&&(this.helperEls.remove(),this.helperEls=null)},fillSegTag:"td",renderFill:function(b,c,d){var f,g,h,e=[];for(c=this.renderFillSegEls(b,c),f=0;f<c.length;f++)g=c[f],h=this.renderFillRow(b,g,d),this.rowEls.eq(g.row).append(h),e.push(h[0]);return this.elsByFill[b]=a(e),c},renderFillRow:function(b,c,d){var h,i,e=this.colCnt,f=c.leftCol,g=c.rightCol+1;return d=d||b.toLowerCase(),h=a('<div class="fc-'+d+'-skeleton"><table><tr/></table></div>'),i=h.find("tr"),f>0&&i.append('<td colspan="'+f+'"/>'),i.append(c.el.attr("colspan",g-f)),g<e&&i.append('<td colspan="'+(e-g)+'"/>'),this.bookendCells(i),h}});Xa.mixin({rowStructs:null,unrenderEvents:function(){this.removeSegPopover(),Oa.prototype.unrenderEvents.apply(this,arguments)},getEventSegs:function(){return Oa.prototype.getEventSegs.call(this).concat(this.popoverSegs||[])},renderBgSegs:function(b){var c=a.grep(b,function(a){return a.event.allDay});return Oa.prototype.renderBgSegs.call(this,c)},renderFgSegs:function(b){var c;return b=this.renderFgSegEls(b),c=this.rowStructs=this.renderSegRows(b),this.rowEls.each(function(b,d){a(d).find(".fc-content-skeleton > table").append(c[b].tbodyEl)}),b},unrenderFgSegs:function(){for(var b,a=this.rowStructs||[];b=a.pop();)b.tbodyEl.remove();this.rowStructs=null},renderSegRows:function(a){var c,d,b=[];for(c=this.groupSegRows(a),d=0;d<c.length;d++)b.push(this.renderSegRow(d,c[d]));return b},fgSegHtml:function(a,b){var k,l,c=this.view,d=a.event,e=c.isEventDraggable(d),f=!b&&d.allDay&&a.isStart&&c.isEventResizableFromStart(d),g=!b&&d.allDay&&a.isEnd&&c.isEventResizableFromEnd(d),h=this.getSegClasses(a,e,f||g),i=ja(this.getSegSkinCss(a)),j="";return h.unshift("fc-day-grid-event","fc-h-event"),a.isStart&&(k=this.getEventTimeText(d),k&&(j='<span class="fc-time">'+ha(k)+"</span>")),l='<span class="fc-title">'+(ha(d.title||"")||"&nbsp;")+"</span>",'<a class="'+h.join(" ")+'"'+(d.url?' href="'+ha(d.url)+'"':"")+(i?' style="'+i+'"':"")+'><div class="fc-content">'+(this.isRTL?l+" "+j:j+" "+l)+"</div>"+(f?'<div class="fc-resizer fc-start-resizer" />':"")+(g?'<div class="fc-resizer fc-end-resizer" />':"")+"</a>"},renderSegRow:function(b,c){function r(b){for(;m<b;)q=(j[k-1]||[])[m],q?q.attr("rowspan",parseInt(q.attr("rowspan")||1,10)+1):(q=a("<td/>"),n.append(q)),i[k][m]=q,j[k][m]=q,m++}var k,l,m,n,o,p,q,d=this.colCnt,e=this.buildSegLevels(c),f=Math.max(1,e.length),g=a("<tbody/>"),h=[],i=[],j=[];for(k=0;k<f;k++){if(l=e[k],m=0,n=a("<tr/>"),h.push([]),i.push([]),j.push([]),l)for(o=0;o<l.length;o++){for(p=l[o],r(p.leftCol),q=a('<td class="fc-event-container"/>').append(p.el),p.leftCol!=p.rightCol?q.attr("colspan",p.rightCol-p.leftCol+1):j[k][m]=q;m<=p.rightCol;)i[k][m]=q,h[k][m]=p,m++;n.append(q)}r(d),this.bookendCells(n),g.append(n)}return{row:b,tbodyEl:g,cellMatrix:i,segMatrix:h,segLevels:e,segs:c}},buildSegLevels:function(a){var c,d,e,b=[];for(this.sortEventSegs(a),c=0;c<a.length;c++){for(d=a[c],e=0;e<b.length&&Ya(d,b[e]);e++);d.level=e,(b[e]||(b[e]=[])).push(d)}for(e=0;e<b.length;e++)b[e].sort(Za);return b},groupSegRows:function(a){var c,b=[];for(c=0;c<this.rowCnt;c++)b.push([]);for(c=0;c<a.length;c++)b[a[c].row].push(a[c]);return b}}),Xa.mixin({segPopover:null,popoverSegs:null,removeSegPopover:function(){this.segPopover&&this.segPopover.hide()},limitRows:function(a){var c,d,b=this.rowStructs||[];for(c=0;c<b.length;c++)this.unlimitRow(c),d=!!a&&("number"==typeof a?a:this.computeRowLevelLimit(c)),d!==!1&&this.limitRow(c,d)},computeRowLevelLimit:function(b){function i(b,c){h=Math.max(h,a(c).outerHeight())}var f,g,h,c=this.rowEls.eq(b),d=c.height(),e=this.rowStructs[b].tbodyEl.children();for(f=0;f<e.length;f++)if(g=e.eq(f).removeClass("fc-limited"),h=0,g.find("> td > :first-child").each(i),g.position().top+h>d)return f;return!1},limitRow:function(b,c){function w(e){for(;g<e;)m=d.getCellSegs(b,g,c),m.length&&(p=i[c-1][g],v=d.renderMoreLink(b,g,m),u=a("<div/>").append(v),p.append(u),f.push(u[0])),g++}var h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,d=this,e=this.rowStructs[b],f=[],g=0;if(c&&c<e.segLevels.length){for(h=e.segLevels[c-1],i=e.cellMatrix,j=e.tbodyEl.children().slice(c).addClass("fc-limited").get(),k=0;k<h.length;k++){for(l=h[k],w(l.leftCol),o=[],n=0;g<=l.rightCol;)m=this.getCellSegs(b,g,c),o.push(m),n+=m.length,g++;if(n){for(p=i[c-1][l.leftCol],q=p.attr("rowspan")||1,r=[],s=0;s<o.length;s++)t=a('<td class="fc-more-cell"/>').attr("rowspan",q),m=o[s],v=this.renderMoreLink(b,l.leftCol+s,[l].concat(m)),u=a("<div/>").append(v),t.append(u),r.push(t[0]),f.push(t[0]);p.addClass("fc-limited").after(a(r)),j.push(p[0])}}w(this.colCnt),e.moreEls=a(f),e.limitedEls=a(j)}},unlimitRow:function(a){var b=this.rowStructs[a];b.moreEls&&(b.moreEls.remove(),b.moreEls=null),b.limitedEls&&(b.limitedEls.removeClass("fc-limited"),b.limitedEls=null)},renderMoreLink:function(b,c,d){var e=this,f=this.view;return a('<a class="fc-more"/>').text(this.getMoreLinkText(d.length)).on("click",function(g){var h=f.opt("eventLimitClick"),i=e.getCellDate(b,c),j=a(this),k=e.getCellEl(b,c),l=e.getCellSegs(b,c),m=e.resliceDaySegs(l,i),n=e.resliceDaySegs(d,i);"function"==typeof h&&(h=f.publiclyTrigger("eventLimitClick",null,{date:i,dayEl:k,moreEl:j,segs:m,hiddenSegs:n},g)),"popover"===h?e.showSegPopover(b,c,j,m):"string"==typeof h&&f.calendar.zoomTo(i,h)})},showSegPopover:function(a,b,c,d){var h,i,e=this,f=this.view,g=c.parent();h=1==this.rowCnt?f.el:this.rowEls.eq(a),i={className:"fc-more-popover",content:this.renderSegPopoverContent(a,b,d),parentEl:this.view.el,top:h.offset().top,autoHide:!0,viewportConstrain:f.opt("popoverViewportConstrain"),hide:function(){if(e.popoverSegs)for(var a,b=0;b<e.popoverSegs.length;++b)a=e.popoverSegs[b],f.publiclyTrigger("eventDestroy",a.event,a.event,a.el);e.segPopover.removeElement(),e.segPopover=null,e.popoverSegs=null}},this.isRTL?i.right=g.offset().left+g.outerWidth()+1:i.left=g.offset().left-1,this.segPopover=new Ga(i),this.segPopover.show(),this.bindSegHandlersToEl(this.segPopover.el)},renderSegPopoverContent:function(b,c,d){var j,e=this.view,f=e.opt("theme"),g=this.getCellDate(b,c).format(e.opt("dayPopoverFormat")),h=a('<div class="fc-header '+e.widgetHeaderClass+'"><span class="fc-close '+(f?"ui-icon ui-icon-closethick":"fc-icon fc-icon-x")+'"></span><span class="fc-title">'+ha(g)+'</span><div class="fc-clear"/></div><div class="fc-body '+e.widgetContentClass+'"><div class="fc-event-container"></div></div>'),i=h.find(".fc-event-container");for(d=this.renderFgSegEls(d,!0),this.popoverSegs=d,j=0;j<d.length;j++)this.hitsNeeded(),d[j].hit=this.getCellHit(b,c),this.hitsNotNeeded(),i.append(d[j].el);return h},resliceDaySegs:function(b,c){var d=a.map(b,function(a){return a.event}),e=c.clone(),f=e.clone().add(1,"days"),g={start:e,end:f};return b=this.eventsToSegs(d,function(a){var b=N(a,g);return b?[b]:[]}),this.sortEventSegs(b),b},getMoreLinkText:function(a){var b=this.view.opt("eventLimitText");return"function"==typeof b?b(a):"+"+a+" "+b},getCellSegs:function(a,b,c){for(var g,d=this.rowStructs[a].segMatrix,e=c||0,f=[];e<d.length;)g=d[e][b],g&&f.push(g),e++;return f}});var $a=c.TimeGrid=Oa.extend(Wa,{slotDuration:null,snapDuration:null,snapsPerSlot:null,minTime:null,maxTime:null,labelFormat:null,labelInterval:null,colEls:null,slatContainerEl:null,slatEls:null,nowIndicatorEls:null,colCoordCache:null,slatCoordCache:null,constructor:function(){Oa.apply(this,arguments),this.processOptions()},renderDates:function(){this.el.html(this.renderHtml()),this.colEls=this.el.find(".fc-day"),this.slatContainerEl=this.el.find(".fc-slats"),this.slatEls=this.slatContainerEl.find("tr"),this.colCoordCache=new Ha({els:this.colEls,isHorizontal:!0}),this.slatCoordCache=new Ha({els:this.slatEls,isVertical:!0}),this.renderContentSkeleton()},renderHtml:function(){return'<div class="fc-bg"><table>'+this.renderBgTrHtml(0)+'</table></div><div class="fc-slats"><table>'+this.renderSlatRowHtml()+"</table></div>"},renderSlatRowHtml:function(){for(var f,g,h,a=this.view,c=this.isRTL,d="",e=b.duration(+this.minTime);e<this.maxTime;)f=this.start.clone().time(e),g=na(W(e,this.labelInterval)),h='<td class="fc-axis fc-time '+a.widgetContentClass+'" '+a.axisStyleAttr()+">"+(g?"<span>"+ha(f.format(this.labelFormat))+"</span>":"")+"</td>",d+='<tr data-time="'+f.format("HH:mm:ss")+'"'+(g?"":' class="fc-minor"')+">"+(c?"":h)+'<td class="'+a.widgetContentClass+'"/>'+(c?h:"")+"</tr>",e.add(this.slotDuration);return d},processOptions:function(){var f,c=this.view,d=c.opt("slotDuration"),e=c.opt("snapDuration");d=b.duration(d),e=e?b.duration(e):d,this.slotDuration=d,this.snapDuration=e,this.snapsPerSlot=d/e,this.minResizeDuration=e,this.minTime=b.duration(c.opt("minTime")),this.maxTime=b.duration(c.opt("maxTime")),f=c.opt("slotLabelFormat"),a.isArray(f)&&(f=f[f.length-1]),this.labelFormat=f||c.opt("smallTimeFormat"),f=c.opt("slotLabelInterval"),this.labelInterval=f?b.duration(f):this.computeLabelInterval(d)},computeLabelInterval:function(a){var c,d,e;for(c=Cb.length-1;c>=0;c--)if(d=b.duration(Cb[c]),e=W(d,a),na(e)&&e>1)return d;return b.duration(a)},computeEventTimeFormat:function(){return this.view.opt("noMeridiemTimeFormat")},computeDisplayEventEnd:function(){return!0},prepareHits:function(){this.colCoordCache.build(),this.slatCoordCache.build()},releaseHits:function(){this.colCoordCache.clear()},queryHit:function(a,b){var c=this.snapsPerSlot,d=this.colCoordCache,e=this.slatCoordCache;if(d.isLeftInBounds(a)&&e.isTopInBounds(b)){var f=d.getHorizontalIndex(a),g=e.getVerticalIndex(b);if(null!=f&&null!=g){var h=e.getTopOffset(g),i=e.getHeight(g),j=(b-h)/i,k=Math.floor(j*c),l=g*c+k,m=h+k/c*i,n=h+(k+1)/c*i;return{col:f,snap:l,component:this,left:d.getLeftOffset(f),right:d.getRightOffset(f),top:m,bottom:n}}}},getHitSpan:function(a){var d,b=this.getCellDate(0,a.col),c=this.computeSnapTime(a.snap);return b.time(c),d=b.clone().add(this.snapDuration),{start:b,end:d}},getHitEl:function(a){return this.colEls.eq(a.col)},rangeUpdated:function(){this.updateDayTable()},computeSnapTime:function(a){return b.duration(this.minTime+this.snapDuration*a)},spanToSegs:function(a){var c,b=this.sliceRangeByTimes(a);for(c=0;c<b.length;c++)this.isRTL?b[c].col=this.daysPerRow-1-b[c].dayIndex:b[c].col=b[c].dayIndex;return b},sliceRangeByTimes:function(a){var c,d,e,f,b=[];for(d=0;d<this.daysPerRow;d++)e=this.dayDates[d].clone(),f={start:e.clone().time(this.minTime),end:e.clone().time(this.maxTime)},c=N(a,f),c&&(c.dayIndex=d,b.push(c));return b},updateSize:function(a){this.slatCoordCache.build(),a&&this.updateSegVerticals([].concat(this.fgSegs||[],this.bgSegs||[],this.businessSegs||[]))},getTotalSlatHeight:function(){return this.slatContainerEl.outerHeight()},computeDateTop:function(a,c){return this.computeTimeTop(b.duration(a-c.clone().stripTime()))},computeTimeTop:function(a){var d,e,b=this.slatEls.length,c=(a-this.minTime)/this.slotDuration;return c=Math.max(0,c),c=Math.min(b,c),d=Math.floor(c),d=Math.min(d,b-1),e=c-d,this.slatCoordCache.getTopPosition(d)+this.slatCoordCache.getHeight(d)*e},renderDrag:function(a,b){return b?this.renderEventLocationHelper(a,b):void this.renderHighlight(this.eventToSpan(a))},unrenderDrag:function(){this.unrenderHelper(),this.unrenderHighlight()},renderEventResize:function(a,b){return this.renderEventLocationHelper(a,b)},unrenderEventResize:function(){this.unrenderHelper()},renderHelper:function(a,b){return this.renderHelperSegs(this.eventToSegs(a),b)},unrenderHelper:function(){this.unrenderHelperSegs()},renderBusinessHours:function(){this.renderBusinessSegs(this.buildBusinessHourSegs())},unrenderBusinessHours:function(){this.unrenderBusinessSegs()},getNowIndicatorUnit:function(){return"minute"},renderNowIndicator:function(b){var f,c=this.spanToSegs({start:b,end:b}),d=this.computeDateTop(b,b),e=[];for(f=0;f<c.length;f++)e.push(a('<div class="fc-now-indicator fc-now-indicator-line"></div>').css("top",d).appendTo(this.colContainerEls.eq(c[f].col))[0]);c.length>0&&e.push(a('<div class="fc-now-indicator fc-now-indicator-arrow"></div>').css("top",d).appendTo(this.el.find(".fc-content-skeleton"))[0]),this.nowIndicatorEls=a(e)},unrenderNowIndicator:function(){this.nowIndicatorEls&&(this.nowIndicatorEls.remove(),this.nowIndicatorEls=null)},renderSelection:function(a){this.view.opt("selectHelper")?this.renderEventLocationHelper(a):this.renderHighlight(a)},unrenderSelection:function(){this.unrenderHelper(),this.unrenderHighlight()},renderHighlight:function(a){this.renderHighlightSegs(this.spanToSegs(a))},unrenderHighlight:function(){this.unrenderHighlightSegs()}});$a.mixin({colContainerEls:null,fgContainerEls:null,bgContainerEls:null,helperContainerEls:null,highlightContainerEls:null,businessContainerEls:null,fgSegs:null,bgSegs:null,helperSegs:null,highlightSegs:null,businessSegs:null,renderContentSkeleton:function(){var c,d,b="";for(c=0;c<this.colCnt;c++)b+='<td><div class="fc-content-col"><div class="fc-event-container fc-helper-container"></div><div class="fc-event-container"></div><div class="fc-highlight-container"></div><div class="fc-bgevent-container"></div><div class="fc-business-container"></div></div></td>';d=a('<div class="fc-content-skeleton"><table><tr>'+b+"</tr></table></div>"),this.colContainerEls=d.find(".fc-content-col"),this.helperContainerEls=d.find(".fc-helper-container"),this.fgContainerEls=d.find(".fc-event-container:not(.fc-helper-container)"),this.bgContainerEls=d.find(".fc-bgevent-container"),this.highlightContainerEls=d.find(".fc-highlight-container"),this.businessContainerEls=d.find(".fc-business-container"),this.bookendCells(d.find("tr")),this.el.append(d)},renderFgSegs:function(a){return a=this.renderFgSegsIntoContainers(a,this.fgContainerEls),this.fgSegs=a,a},unrenderFgSegs:function(){this.unrenderNamedSegs("fgSegs")},renderHelperSegs:function(b,c){var e,f,g,d=[];for(b=this.renderFgSegsIntoContainers(b,this.helperContainerEls),e=0;e<b.length;e++)f=b[e],c&&c.col===f.col&&(g=c.el,f.el.css({left:g.css("left"),right:g.css("right"),"margin-left":g.css("margin-left"),"margin-right":g.css("margin-right")})),d.push(f.el[0]);return this.helperSegs=b,a(d)},unrenderHelperSegs:function(){this.unrenderNamedSegs("helperSegs")},renderBgSegs:function(a){return a=this.renderFillSegEls("bgEvent",a),this.updateSegVerticals(a),this.attachSegsByCol(this.groupSegsByCol(a),this.bgContainerEls),this.bgSegs=a,a},unrenderBgSegs:function(){this.unrenderNamedSegs("bgSegs")},renderHighlightSegs:function(a){a=this.renderFillSegEls("highlight",a),this.updateSegVerticals(a),this.attachSegsByCol(this.groupSegsByCol(a),this.highlightContainerEls),this.highlightSegs=a},unrenderHighlightSegs:function(){this.unrenderNamedSegs("highlightSegs")},renderBusinessSegs:function(a){a=this.renderFillSegEls("businessHours",a),this.updateSegVerticals(a),this.attachSegsByCol(this.groupSegsByCol(a),this.businessContainerEls),this.businessSegs=a},unrenderBusinessSegs:function(){this.unrenderNamedSegs("businessSegs")},groupSegsByCol:function(a){var c,b=[];for(c=0;c<this.colCnt;c++)b.push([]);for(c=0;c<a.length;c++)b[a[c].col].push(a[c]);return b},attachSegsByCol:function(a,b){var c,d,e;for(c=0;c<this.colCnt;c++)for(d=a[c],e=0;e<d.length;e++)b.eq(c).append(d[e].el)},unrenderNamedSegs:function(a){var c,b=this[a];if(b){for(c=0;c<b.length;c++)b[c].el.remove();this[a]=null}},renderFgSegsIntoContainers:function(a,b){var c,d;for(a=this.renderFgSegEls(a),c=this.groupSegsByCol(a),d=0;d<this.colCnt;d++)this.updateFgSegCoords(c[d]);return this.attachSegsByCol(c,b),a},fgSegHtml:function(a,b){var j,k,l,c=this.view,d=a.event,e=c.isEventDraggable(d),f=!b&&a.isStart&&c.isEventResizableFromStart(d),g=!b&&a.isEnd&&c.isEventResizableFromEnd(d),h=this.getSegClasses(a,e,f||g),i=ja(this.getSegSkinCss(a));return h.unshift("fc-time-grid-event","fc-v-event"),c.isMultiDayEvent(d)?(a.isStart||a.isEnd)&&(j=this.getEventTimeText(a),k=this.getEventTimeText(a,"LT"),l=this.getEventTimeText(a,null,!1)):(j=this.getEventTimeText(d),k=this.getEventTimeText(d,"LT"),l=this.getEventTimeText(d,null,!1)),'<a class="'+h.join(" ")+'"'+(d.url?' href="'+ha(d.url)+'"':"")+(i?' style="'+i+'"':"")+'><div class="fc-content">'+(j?'<div class="fc-time" data-start="'+ha(l)+'" data-full="'+ha(k)+'"><span>'+ha(j)+"</span></div>":"")+(d.title?'<div class="fc-title">'+ha(d.title)+"</div>":"")+'</div><div class="fc-bg"/>'+(g?'<div class="fc-resizer fc-end-resizer" />':"")+"</a>"},updateSegVerticals:function(a){this.computeSegVerticals(a),this.assignSegVerticals(a)},computeSegVerticals:function(a){var b,c;for(b=0;b<a.length;b++)c=a[b],c.top=this.computeDateTop(c.start,c.start),c.bottom=this.computeDateTop(c.end,c.start)},assignSegVerticals:function(a){var b,c;for(b=0;b<a.length;b++)c=a[b],c.el.css(this.generateSegVerticalCss(c))},generateSegVerticalCss:function(a){return{top:a.top,bottom:-a.bottom}},updateFgSegCoords:function(a){this.computeSegVerticals(a),this.computeFgSegHorizontals(a),this.assignSegVerticals(a),this.assignFgSegHorizontals(a)},computeFgSegHorizontals:function(a){var b,c,d;if(this.sortEventSegs(a),b=_a(a),ab(b),c=b[0]){for(d=0;d<c.length;d++)bb(c[d]);for(d=0;d<c.length;d++)this.computeFgSegForwardBack(c[d],0,0)}},computeFgSegForwardBack:function(a,b,c){var e,d=a.forwardSegs;if(void 0===a.forwardCoord)for(d.length?(this.sortForwardSegs(d),this.computeFgSegForwardBack(d[0],b+1,c),a.forwardCoord=d[0].backwardCoord):a.forwardCoord=1,a.backwardCoord=a.forwardCoord-(a.forwardCoord-c)/(b+1),e=0;e<d.length;e++)this.computeFgSegForwardBack(d[e],0,a.forwardCoord)},sortForwardSegs:function(a){a.sort(oa(this,"compareForwardSegs"))},compareForwardSegs:function(a,b){return b.forwardPressure-a.forwardPressure||(a.backwardCoord||0)-(b.backwardCoord||0)||this.compareEventSegs(a,b)},assignFgSegHorizontals:function(a){var b,c;for(b=0;b<a.length;b++)c=a[b],c.el.css(this.generateFgSegHorizontalCss(c)),c.bottom-c.top<30&&c.el.addClass("fc-short")},generateFgSegHorizontalCss:function(a){var f,g,b=this.view.opt("slotEventOverlap"),c=a.backwardCoord,d=a.forwardCoord,e=this.generateSegVerticalCss(a);return b&&(d=Math.min(1,c+2*(d-c))),this.isRTL?(f=1-d,g=c):(f=c,g=1-d),e.zIndex=a.level+1,e.left=100*f+"%",e.right=100*g+"%",b&&a.forwardPressure&&(e[this.isRTL?"marginLeft":"marginRight"]=20),e}});var eb=c.View=za.extend(Ea,Fa,{type:null,name:null,title:null,calendar:null,options:null,el:null,isDateSet:!1,isDateRendered:!1,dateRenderQueue:null,isEventsBound:!1,isEventsSet:!1,isEventsRendered:!1,eventRenderQueue:null,start:null,end:null,intervalStart:null,intervalEnd:null,intervalDuration:null,intervalUnit:null,isRTL:!1,isSelected:!1,selectedEvent:null,eventOrderSpecs:null,widgetHeaderClass:null,widgetContentClass:null,highlightStateClass:null,nextDayThreshold:null,isHiddenDayHash:null,isNowIndicatorRendered:null,initialNowDate:null,initialNowQueriedMs:null,nowIndicatorTimeoutID:null,nowIndicatorIntervalID:null,constructor:function(a,c,d,e){this.calendar=a,this.type=this.name=c,this.options=d,this.intervalDuration=e||b.duration(1,"day"),this.nextDayThreshold=b.duration(this.opt("nextDayThreshold")),this.initThemingProps(),this.initHiddenDays(),this.isRTL=this.opt("isRTL"),this.eventOrderSpecs=J(this.opt("eventOrder")),this.dateRenderQueue=new Da,this.eventRenderQueue=new Da(this.opt("eventRenderWait")),this.initialize()},initialize:function(){},opt:function(a){return this.options[a]},publiclyTrigger:function(a,b){var c=this.calendar;return c.publiclyTrigger.apply(c,[a,b||this].concat(Array.prototype.slice.call(arguments,2),[this]))},rejectOn:function(a,b){var c=this;return new Ca(function(d,e){function f(){c.off(a,e)}c.one(a,e),b.then(function(a){f(),d(a)},function(){f(),e()})})},setRange:function(b){a.extend(this,b),this.updateTitle()},computeRange:function(a){var e,f,b=T(this.intervalDuration),c=a.clone().startOf(b),d=c.clone().add(this.intervalDuration);return/year|month|week|day/.test(b)?(c.stripTime(),d.stripTime()):(c.hasTime()||(c=this.calendar.time(0)),d.hasTime()||(d=this.calendar.time(0))),e=c.clone(),e=this.skipHiddenDays(e),f=d.clone(),f=this.skipHiddenDays(f,-1,!0),{intervalUnit:b,intervalStart:c,intervalEnd:d,start:e,end:f}},computePrevDate:function(a){return this.massageCurrentDate(a.clone().startOf(this.intervalUnit).subtract(this.intervalDuration),-1)},computeNextDate:function(a){return this.massageCurrentDate(a.clone().startOf(this.intervalUnit).add(this.intervalDuration))},massageCurrentDate:function(a,b){return this.intervalDuration.as("days")<=1&&this.isHiddenDay(a)&&(a=this.skipHiddenDays(a,b),a.startOf("day")),a},updateTitle:function(){this.title=this.computeTitle(),this.calendar.setToolbarsTitle(this.title)},computeTitle:function(){var a,b;return"year"===this.intervalUnit||"month"===this.intervalUnit?(a=this.intervalStart,b=this.intervalEnd):(a=this.start,
b=this.end),this.formatRange({start:this.calendar.applyTimezone(a),end:this.calendar.applyTimezone(b)},this.opt("titleFormat")||this.computeTitleFormat(),this.opt("titleRangeSeparator"))},computeTitleFormat:function(){return"year"==this.intervalUnit?"YYYY":"month"==this.intervalUnit?this.opt("monthYearFormat"):this.intervalDuration.as("days")>1?"ll":"LL"},formatRange:function(a,b,c){var d=a.end;return d.hasTime()||(d=d.clone().subtract(1)),xa(a.start,d,b,c,this.opt("isRTL"))},getAllDayHtml:function(){return this.opt("allDayHtml")||ha(this.opt("allDayText"))},buildGotoAnchorHtml:function(b,d,e){var f,g,h,i;return a.isPlainObject(b)?(f=b.date,g=b.type,h=b.forceOff):f=b,f=c.moment(f),i={date:f.format("YYYY-MM-DD"),type:g||"day"},"string"==typeof d&&(e=d,d=null),d=d?" "+ka(d):"",e=e||"",!h&&this.opt("navLinks")?"<a"+d+' data-goto="'+ha(JSON.stringify(i))+'">'+e+"</a>":"<span"+d+">"+e+"</span>"},setElement:function(a){this.el=a,this.bindGlobalHandlers(),this.renderSkeleton()},removeElement:function(){this.unsetDate(),this.unrenderSkeleton(),this.unbindGlobalHandlers(),this.el.remove()},renderSkeleton:function(){},unrenderSkeleton:function(){},setDate:function(a){var b=this.isDateSet;this.isDateSet=!0,this.handleDate(a,b),this.trigger(b?"dateReset":"dateSet",a)},unsetDate:function(){this.isDateSet&&(this.isDateSet=!1,this.handleDateUnset(),this.trigger("dateUnset"))},handleDate:function(a,b){var c=this;this.unbindEvents(),this.requestDateRender(a).then(function(){c.bindEvents()})},handleDateUnset:function(){this.unbindEvents(),this.requestDateUnrender()},requestDateRender:function(a){var b=this;return this.dateRenderQueue.add(function(){return b.executeDateRender(a)})},requestDateUnrender:function(){var a=this;return this.dateRenderQueue.add(function(){return a.executeDateUnrender()})},executeDateRender:function(a){var b=this;return a?this.captureInitialScroll():this.captureScroll(),this.freezeHeight(),this.executeDateUnrender().then(function(){a&&b.setRange(b.computeRange(a)),b.render&&b.render(),b.renderDates(),b.updateSize(),b.renderBusinessHours(),b.startNowIndicator(),b.thawHeight(),b.releaseScroll(),b.isDateRendered=!0,b.onDateRender(),b.trigger("dateRender")})},executeDateUnrender:function(){var a=this;return a.isDateRendered?this.requestEventsUnrender().then(function(){a.unselect(),a.stopNowIndicator(),a.triggerUnrender(),a.unrenderBusinessHours(),a.unrenderDates(),a.destroy&&a.destroy(),a.isDateRendered=!1,a.trigger("dateUnrender")}):Ca.resolve()},onDateRender:function(){this.triggerRender()},renderDates:function(){},unrenderDates:function(){},triggerRender:function(){this.publiclyTrigger("viewRender",this,this,this.el)},triggerUnrender:function(){this.publiclyTrigger("viewDestroy",this,this,this.el)},bindGlobalHandlers:function(){this.listenTo(Ma.get(),{touchstart:this.processUnselect,mousedown:this.handleDocumentMousedown})},unbindGlobalHandlers:function(){this.stopListeningTo(Ma.get())},initThemingProps:function(){var a=this.opt("theme")?"ui":"fc";this.widgetHeaderClass=a+"-widget-header",this.widgetContentClass=a+"-widget-content",this.highlightStateClass=a+"-state-highlight"},renderBusinessHours:function(){},unrenderBusinessHours:function(){},startNowIndicator:function(){var c,d,e,a=this;this.opt("nowIndicator")&&(c=this.getNowIndicatorUnit(),c&&(d=oa(this,"updateNowIndicator"),this.initialNowDate=this.calendar.getNow(),this.initialNowQueriedMs=+new Date,this.renderNowIndicator(this.initialNowDate),this.isNowIndicatorRendered=!0,e=this.initialNowDate.clone().startOf(c).add(1,c)-this.initialNowDate,this.nowIndicatorTimeoutID=setTimeout(function(){a.nowIndicatorTimeoutID=null,d(),e=+b.duration(1,c),e=Math.max(100,e),a.nowIndicatorIntervalID=setInterval(d,e)},e)))},updateNowIndicator:function(){this.isNowIndicatorRendered&&(this.unrenderNowIndicator(),this.renderNowIndicator(this.initialNowDate.clone().add(new Date-this.initialNowQueriedMs)))},stopNowIndicator:function(){this.isNowIndicatorRendered&&(this.nowIndicatorTimeoutID&&(clearTimeout(this.nowIndicatorTimeoutID),this.nowIndicatorTimeoutID=null),this.nowIndicatorIntervalID&&(clearTimeout(this.nowIndicatorIntervalID),this.nowIndicatorIntervalID=null),this.unrenderNowIndicator(),this.isNowIndicatorRendered=!1)},getNowIndicatorUnit:function(){},renderNowIndicator:function(a){},unrenderNowIndicator:function(){},updateSize:function(a){a&&this.captureScroll(),this.updateHeight(a),this.updateWidth(a),this.updateNowIndicator(),a&&this.releaseScroll()},updateWidth:function(a){},updateHeight:function(a){var b=this.calendar;this.setHeight(b.getSuggestedViewHeight(),b.isHeightAuto())},setHeight:function(a,b){},capturedScroll:null,capturedScrollDepth:0,captureScroll:function(){return!this.capturedScrollDepth++&&(this.capturedScroll=this.isDateRendered?this.queryScroll():{},!0)},captureInitialScroll:function(b){this.captureScroll()&&(this.capturedScroll.isInitial=!0,b?a.extend(this.capturedScroll,b):this.capturedScroll.isComputed=!0)},releaseScroll:function(){var b=this.capturedScroll,c=this.discardScroll();b.isComputed&&(c?a.extend(b,this.computeInitialScroll()):b=null),b&&(b.isInitial?this.hardSetScroll(b):this.setScroll(b))},discardScroll:function(){return!--this.capturedScrollDepth&&(this.capturedScroll=null,!0)},computeInitialScroll:function(){return{}},queryScroll:function(){return{}},hardSetScroll:function(a){var b=this,c=function(){b.setScroll(a)};c(),setTimeout(c,0)},setScroll:function(a){},freezeHeight:function(){this.calendar.freezeContentHeight()},thawHeight:function(){this.calendar.thawContentHeight()},bindEvents:function(){var a=this;this.isEventsBound||(this.isEventsBound=!0,this.rejectOn("eventsUnbind",this.requestEvents()).then(function(b){a.listenTo(a.calendar,"eventsReset",a.setEvents),a.setEvents(b)}))},unbindEvents:function(){this.isEventsBound&&(this.isEventsBound=!1,this.stopListeningTo(this.calendar,"eventsReset"),this.unsetEvents(),this.trigger("eventsUnbind"))},setEvents:function(a){var b=this.isEventSet;this.isEventsSet=!0,this.handleEvents(a,b),this.trigger(b?"eventsReset":"eventsSet",a)},unsetEvents:function(){this.isEventsSet&&(this.isEventsSet=!1,this.handleEventsUnset(),this.trigger("eventsUnset"))},whenEventsSet:function(){var a=this;return this.isEventsSet?Ca.resolve(this.getCurrentEvents()):new Ca(function(b){a.one("eventsSet",b)})},handleEvents:function(a,b){this.requestEventsRender(a)},handleEventsUnset:function(){this.requestEventsUnrender()},requestEventsRender:function(a){var b=this;return this.eventRenderQueue.add(function(){return b.executeEventsRender(a)})},requestEventsUnrender:function(){var a=this;return this.isEventsRendered?this.eventRenderQueue.addQuickly(function(){return a.executeEventsUnrender()}):Ca.resolve()},requestCurrentEventsRender:function(){return this.isEventsSet?void this.requestEventsRender(this.getCurrentEvents()):Ca.reject()},executeEventsRender:function(a){var b=this;return this.captureScroll(),this.freezeHeight(),this.executeEventsUnrender().then(function(){b.renderEvents(a),b.thawHeight(),b.releaseScroll(),b.isEventsRendered=!0,b.onEventsRender(),b.trigger("eventsRender")})},executeEventsUnrender:function(){return this.isEventsRendered&&(this.onBeforeEventsUnrender(),this.captureScroll(),this.freezeHeight(),this.destroyEvents&&this.destroyEvents(),this.unrenderEvents(),this.thawHeight(),this.releaseScroll(),this.isEventsRendered=!1,this.trigger("eventsUnrender")),Ca.resolve()},onEventsRender:function(){this.renderedEventSegEach(function(a){this.publiclyTrigger("eventAfterRender",a.event,a.event,a.el)}),this.publiclyTrigger("eventAfterAllRender")},onBeforeEventsUnrender:function(){this.renderedEventSegEach(function(a){this.publiclyTrigger("eventDestroy",a.event,a.event,a.el)})},renderEvents:function(a){},unrenderEvents:function(){},requestEvents:function(){return this.calendar.requestEvents(this.start,this.end)},getCurrentEvents:function(){return this.calendar.getPrunedEventCache()},resolveEventEl:function(b,c){var d=this.publiclyTrigger("eventRender",b,b,c);return d===!1?c=null:d&&d!==!0&&(c=a(d)),c},showEvent:function(a){this.renderedEventSegEach(function(a){a.el.css("visibility","")},a)},hideEvent:function(a){this.renderedEventSegEach(function(a){a.el.css("visibility","hidden")},a)},renderedEventSegEach:function(a,b){var d,c=this.getEventSegs();for(d=0;d<c.length;d++)b&&c[d].event._id!==b._id||c[d].el&&a.call(this,c[d])},getEventSegs:function(){return[]},isEventDraggable:function(a){return this.isEventStartEditable(a)},isEventStartEditable:function(a){return ga(a.startEditable,(a.source||{}).startEditable,this.opt("eventStartEditable"),this.isEventGenerallyEditable(a))},isEventGenerallyEditable:function(a){return ga(a.editable,(a.source||{}).editable,this.opt("editable"))},reportSegDrop:function(a,b,c,d,e){var f=this.calendar,g=f.mutateSeg(a,b,c),h=function(){g.undo(),f.reportEventChange()};this.triggerEventDrop(a.event,g.dateDelta,h,d,e),f.reportEventChange()},triggerEventDrop:function(a,b,c,d,e){this.publiclyTrigger("eventDrop",d[0],a,b,c,e,{})},reportExternalDrop:function(b,c,d,e,f){var h,i,g=b.eventProps;g&&(h=a.extend({},g,c),i=this.calendar.renderEvent(h,b.stick)[0]),this.triggerExternalDrop(i,c,d,e,f)},triggerExternalDrop:function(a,b,c,d,e){this.publiclyTrigger("drop",c[0],b.start,d,e),a&&this.publiclyTrigger("eventReceive",null,a)},renderDrag:function(a,b){},unrenderDrag:function(){},isEventResizableFromStart:function(a){return this.opt("eventResizableFromStart")&&this.isEventResizable(a)},isEventResizableFromEnd:function(a){return this.isEventResizable(a)},isEventResizable:function(a){var b=a.source||{};return ga(a.durationEditable,b.durationEditable,this.opt("eventDurationEditable"),a.editable,b.editable,this.opt("editable"))},reportSegResize:function(a,b,c,d,e){var f=this.calendar,g=f.mutateSeg(a,b,c),h=function(){g.undo(),f.reportEventChange()};this.triggerEventResize(a.event,g.durationDelta,h,d,e),f.reportEventChange()},triggerEventResize:function(a,b,c,d,e){this.publiclyTrigger("eventResize",d[0],a,b,c,e,{})},select:function(a,b){this.unselect(b),this.renderSelection(a),this.reportSelection(a,b)},renderSelection:function(a){},reportSelection:function(a,b){this.isSelected=!0,this.triggerSelect(a,b)},triggerSelect:function(a,b){this.publiclyTrigger("select",null,this.calendar.applyTimezone(a.start),this.calendar.applyTimezone(a.end),b)},unselect:function(a){this.isSelected&&(this.isSelected=!1,this.destroySelection&&this.destroySelection(),this.unrenderSelection(),this.publiclyTrigger("unselect",null,a))},unrenderSelection:function(){},selectEvent:function(a){this.selectedEvent&&this.selectedEvent===a||(this.unselectEvent(),this.renderedEventSegEach(function(a){a.el.addClass("fc-selected")},a),this.selectedEvent=a)},unselectEvent:function(){this.selectedEvent&&(this.renderedEventSegEach(function(a){a.el.removeClass("fc-selected")},this.selectedEvent),this.selectedEvent=null)},isEventSelected:function(a){return this.selectedEvent&&this.selectedEvent._id===a._id},handleDocumentMousedown:function(a){y(a)&&this.processUnselect(a)},processUnselect:function(a){this.processRangeUnselect(a),this.processEventUnselect(a)},processRangeUnselect:function(b){var c;this.isSelected&&this.opt("unselectAuto")&&(c=this.opt("unselectCancel"),c&&a(b.target).closest(c).length||this.unselect(b))},processEventUnselect:function(b){this.selectedEvent&&(a(b.target).closest(".fc-selected").length||this.unselectEvent())},triggerDayClick:function(a,b,c){this.publiclyTrigger("dayClick",b,this.calendar.applyTimezone(a.start),c)},initHiddenDays:function(){var e,b=this.opt("hiddenDays")||[],c=[],d=0;for(this.opt("weekends")===!1&&b.push(0,6),e=0;e<7;e++)(c[e]=a.inArray(e,b)!==-1)||d++;if(!d)throw"invalid hiddenDays";this.isHiddenDayHash=c},isHiddenDay:function(a){return b.isMoment(a)&&(a=a.day()),this.isHiddenDayHash[a]},skipHiddenDays:function(a,b,c){var d=a.clone();for(b=b||1;this.isHiddenDayHash[(d.day()+(c?b:0)+7)%7];)d.add(b,"days");return d},computeDayRange:function(a){var e,b=a.start.clone().stripTime(),c=a.end,d=null;return c&&(d=c.clone().stripTime(),e=+c.time(),e&&e>=this.nextDayThreshold&&d.add(1,"days")),(!c||d<=b)&&(d=b.clone().add(1,"days")),{start:b,end:d}},isMultiDayEvent:function(a){var b=this.computeDayRange(a);return b.end.diff(b.start,"days")>1}}),fb=c.Scroller=za.extend({el:null,scrollEl:null,overflowX:null,overflowY:null,constructor:function(a){a=a||{},this.overflowX=a.overflowX||a.overflow||"auto",this.overflowY=a.overflowY||a.overflow||"auto"},render:function(){this.el=this.renderEl(),this.applyOverflow()},renderEl:function(){return this.scrollEl=a('<div class="fc-scroller"></div>')},clear:function(){this.setHeight("auto"),this.applyOverflow()},destroy:function(){this.el.remove()},applyOverflow:function(){this.scrollEl.css({"overflow-x":this.overflowX,"overflow-y":this.overflowY})},lockOverflow:function(a){var b=this.overflowX,c=this.overflowY;a=a||this.getScrollbarWidths(),"auto"===b&&(b=a.top||a.bottom||this.scrollEl[0].scrollWidth-1>this.scrollEl[0].clientWidth?"scroll":"hidden"),"auto"===c&&(c=a.left||a.right||this.scrollEl[0].scrollHeight-1>this.scrollEl[0].clientHeight?"scroll":"hidden"),this.scrollEl.css({"overflow-x":b,"overflow-y":c})},setHeight:function(a){this.scrollEl.height(a)},getScrollTop:function(){return this.scrollEl.scrollTop()},setScrollTop:function(a){this.scrollEl.scrollTop(a)},getClientWidth:function(){return this.scrollEl[0].clientWidth},getClientHeight:function(){return this.scrollEl[0].clientHeight},getScrollbarWidths:function(){return s(this.scrollEl)}});gb.prototype.proxyCall=function(a){var b=Array.prototype.slice.call(arguments,1),c=[];return this.items.forEach(function(d){c.push(d[a].apply(d,b))}),c};var ib=c.Calendar=za.extend({dirDefaults:null,localeDefaults:null,overrides:null,dynamicOverrides:null,options:null,viewSpecCache:null,view:null,header:null,footer:null,loadingLevel:0,constructor:jb,initialize:function(){},populateOptionsHash:function(){var a,b,c,d;a=ga(this.dynamicOverrides.locale,this.overrides.locale),b=kb[a],b||(a=ib.defaults.locale,b=kb[a]||{}),c=ga(this.dynamicOverrides.isRTL,this.overrides.isRTL,b.isRTL,ib.defaults.isRTL),d=c?ib.rtlDefaults:{},this.dirDefaults=d,this.localeDefaults=b,this.options=f([ib.defaults,d,b,this.overrides,this.dynamicOverrides]),ob(this.options)},getViewSpec:function(a){var b=this.viewSpecCache;return b[a]||(b[a]=this.buildViewSpec(a))},getUnitViewSpec:function(b){var d,e,f;if(a.inArray(b,P)!=-1)for(d=this.header.getViewsWithButtons(),a.each(c.views,function(a){d.push(a)}),e=0;e<d.length;e++)if(f=this.getViewSpec(d[e]),f&&f.singleUnit==b)return f},buildViewSpec:function(a){for(var j,k,l,m,c=this.overrides.views||{},e=[],g=[],h=[],i=a;i;)j=d[i],k=c[i],i=null,"function"==typeof j&&(j={class:j}),j&&(e.unshift(j),g.unshift(j.defaults||{}),l=l||j.duration,i=i||j.type),k&&(h.unshift(k),l=l||k.duration,i=i||k.type);return j=aa(e),j.type=a,!!j.class&&(l&&(l=b.duration(l),l.valueOf()&&(j.duration=l,m=T(l),1===l.as(m)&&(j.singleUnit=m,h.unshift(c[m]||{})))),j.defaults=f(g),j.overrides=f(h),this.buildViewSpecOptions(j),this.buildViewSpecButtonText(j,a),j)},buildViewSpecOptions:function(a){a.options=f([ib.defaults,a.defaults,this.dirDefaults,this.localeDefaults,this.overrides,a.overrides,this.dynamicOverrides]),ob(a.options)},buildViewSpecButtonText:function(a,b){function c(c){var d=c.buttonText||{};return d[b]||(a.buttonTextKey?d[a.buttonTextKey]:null)||(a.singleUnit?d[a.singleUnit]:null)}a.buttonTextOverride=c(this.dynamicOverrides)||c(this.overrides)||a.overrides.buttonText,a.buttonTextDefault=c(this.localeDefaults)||c(this.dirDefaults)||a.defaults.buttonText||c(ib.defaults)||(a.duration?this.humanizeDuration(a.duration):null)||b},instantiateView:function(a){var b=this.getViewSpec(a);return new b.class(this,a,b.options,b.duration)},isValidViewType:function(a){return Boolean(this.getViewSpec(a))},pushLoading:function(){this.loadingLevel++||this.publiclyTrigger("loading",null,!0,this.view)},popLoading:function(){--this.loadingLevel||this.publiclyTrigger("loading",null,!1,this.view)},buildSelectSpan:function(a,b){var d,c=this.moment(a).stripZone();return d=b?this.moment(b).stripZone():c.hasTime()?c.clone().add(this.defaultTimedEventDuration):c.clone().add(this.defaultAllDayEventDuration),{start:c,end:d}}});ib.mixin(Ea),ib.mixin({optionHandlers:null,bindOption:function(a,b){this.bindOptions([a],b)},bindOptions:function(a,b){var d,c={func:b,names:a};for(d=0;d<a.length;d++)this.registerOptionHandlerObj(a[d],c);this.triggerOptionHandlerObj(c)},registerOptionHandlerObj:function(a,b){(this.optionHandlers[a]||(this.optionHandlers[a]=[])).push(b)},triggerOptionHandlers:function(a){var c,b=this.optionHandlers[a]||[];for(c=0;c<b.length;c++)this.triggerOptionHandlerObj(b[c])},triggerOptionHandlerObj:function(a){var d,b=a.names,c=[];for(d=0;d<b.length;d++)c.push(this.options[b[d]]);a.func.apply(this,c)}}),ib.defaults={titleRangeSeparator:" – ",monthYearFormat:"MMMM YYYY",defaultTimedEventDuration:"02:00:00",defaultAllDayEventDuration:{days:1},forceEventDuration:!1,nextDayThreshold:"09:00:00",defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberTitle:"W",weekNumberCalculation:"local",scrollTime:"06:00:00",lazyFetching:!0,startParam:"start",endParam:"end",timezoneParam:"timezone",timezone:!1,isRTL:!1,buttonText:{prev:"prev",next:"next",prevYear:"prev year",nextYear:"next year",year:"year",today:"today",month:"month",week:"week",day:"day"},buttonIcons:{prev:"left-single-arrow",next:"right-single-arrow",prevYear:"left-double-arrow",nextYear:"right-double-arrow"},allDayText:"all-day",theme:!1,themeButtonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e",prevYear:"seek-prev",nextYear:"seek-next"},dragOpacity:.75,dragRevertDuration:500,dragScroll:!0,unselectAuto:!0,dropAccept:"*",eventOrder:"title",eventLimit:!1,eventLimitText:"more",eventLimitClick:"popover",dayPopoverFormat:"LL",handleWindowResize:!0,windowResizeDelay:100,longPressDelay:1e3},ib.englishDefaults={dayPopoverFormat:"dddd, MMMM D"},ib.rtlDefaults={header:{left:"next,prev today",center:"",right:"title"},buttonIcons:{prev:"right-single-arrow",next:"left-single-arrow",prevYear:"right-double-arrow",nextYear:"left-double-arrow"},themeButtonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w",nextYear:"seek-prev",prevYear:"seek-next"}};var kb=c.locales={};c.datepickerLocale=function(b,c,d){var e=kb[b]||(kb[b]={});e.isRTL=d.isRTL,e.weekNumberTitle=d.weekHeader,a.each(lb,function(a,b){e[a]=b(d)}),a.datepicker&&(a.datepicker.regional[c]=a.datepicker.regional[b]=d,a.datepicker.regional.en=a.datepicker.regional[""],a.datepicker.setDefaults(d))},c.locale=function(b,c){var d,e;d=kb[b]||(kb[b]={}),c&&(d=kb[b]=f([d,c])),e=pb(b),a.each(mb,function(a,b){null==d[a]&&(d[a]=b(e,d))}),ib.defaults.locale=b};var lb={buttonText:function(a){return{prev:ia(a.prevText),next:ia(a.nextText),today:ia(a.currentText)}},monthYearFormat:function(a){return a.showMonthAfterYear?"YYYY["+a.yearSuffix+"] MMMM":"MMMM YYYY["+a.yearSuffix+"]"}},mb={dayOfMonthFormat:function(a,b){var c=a.longDateFormat("l");return c=c.replace(/^Y+[^\w\s]*|[^\w\s]*Y+$/g,""),b.isRTL?c+=" ddd":c="ddd "+c,c},mediumTimeFormat:function(a){return a.longDateFormat("LT").replace(/\s*a$/i,"a")},smallTimeFormat:function(a){return a.longDateFormat("LT").replace(":mm","(:mm)").replace(/(\Wmm)$/,"($1)").replace(/\s*a$/i,"a")},extraSmallTimeFormat:function(a){return a.longDateFormat("LT").replace(":mm","(:mm)").replace(/(\Wmm)$/,"($1)").replace(/\s*a$/i,"t")},hourFormat:function(a){return a.longDateFormat("LT").replace(":mm","").replace(/(\Wmm)$/,"").replace(/\s*a$/i,"a")},noMeridiemTimeFormat:function(a){return a.longDateFormat("LT").replace(/\s*a$/i,"")}},nb={smallDayDateFormat:function(a){return a.isRTL?"D dd":"dd D"},weekFormat:function(a){return a.isRTL?"w[ "+a.weekNumberTitle+"]":"["+a.weekNumberTitle+" ]w"},smallWeekFormat:function(a){return a.isRTL?"w["+a.weekNumberTitle+"]":"["+a.weekNumberTitle+"]w"}};c.locale("en",ib.englishDefaults),c.sourceNormalizers=[],c.sourceFetchers=[];var qb={dataType:"json",cache:!1},rb=1;ib.prototype.mutateSeg=function(a,b){return this.mutateEvent(a.event,b)},ib.prototype.normalizeEvent=function(a){},ib.prototype.spanContainsSpan=function(a,b){var c=a.start.clone().stripZone(),d=this.getEventEnd(a).stripZone();return b.start>=c&&b.end<=d},ib.prototype.getPeerEvents=function(a,b){var e,f,c=this.getEventCache(),d=[];for(e=0;e<c.length;e++)f=c[e],b&&b._id===f._id||d.push(f);return d},ib.prototype.isEventSpanAllowed=function(a,b){var c=b.source||{},d=ga(b.constraint,c.constraint,this.options.eventConstraint),e=ga(b.overlap,c.overlap,this.options.eventOverlap);return this.isSpanAllowed(a,d,e,b)&&(!this.options.eventAllow||this.options.eventAllow(a,b)!==!1)},ib.prototype.isExternalSpanAllowed=function(b,c,d){var e,f;return d&&(e=a.extend({},d,c),f=this.expandEvent(this.buildEventFromInput(e))[0]),f?this.isEventSpanAllowed(b,f):this.isSelectionSpanAllowed(b)},ib.prototype.isSelectionSpanAllowed=function(a){return this.isSpanAllowed(a,this.options.selectConstraint,this.options.selectOverlap)&&(!this.options.selectAllow||this.options.selectAllow(a)!==!1)},ib.prototype.isSpanAllowed=function(a,b,c,d){var e,f,g,h,i,j;if(null!=b&&(e=this.constraintToEvents(b))){for(f=!1,h=0;h<e.length;h++)if(this.spanContainsSpan(e[h],a)){f=!0;break}if(!f)return!1}for(g=this.getPeerEvents(a,d),h=0;h<g.length;h++)if(i=g[h],this.eventIntersectsRange(i,a)){if(c===!1)return!1;if("function"==typeof c&&!c(i,d))return!1;if(d){if(j=ga(i.overlap,(i.source||{}).overlap),j===!1)return!1;if("function"==typeof j&&!j(d,i))return!1}}return!0},ib.prototype.constraintToEvents=function(a){return"businessHours"===a?this.getCurrentBusinessHourEvents():"object"==typeof a?null!=a.start?this.expandEvent(this.buildEventFromInput(a)):null:this.clientEvents(a)},ib.prototype.eventIntersectsRange=function(a,b){var c=a.start.clone().stripZone(),d=this.getEventEnd(a).stripZone();return b.start<d&&b.end>c};var ub={id:"_fcBusinessHours",start:"09:00",end:"17:00",dow:[1,2,3,4,5],rendering:"inverse-background"};ib.prototype.getCurrentBusinessHourEvents=function(a){return this.computeBusinessHourEvents(a,this.options.businessHours)},ib.prototype.computeBusinessHourEvents=function(b,c){return c===!0?this.expandBusinessHourEvents(b,[{}]):a.isPlainObject(c)?this.expandBusinessHourEvents(b,[c]):a.isArray(c)?this.expandBusinessHourEvents(b,c,!0):[]},ib.prototype.expandBusinessHourEvents=function(b,c,d){var g,h,e=this.getView(),f=[];for(g=0;g<c.length;g++)h=c[g],d&&!h.dow||(h=a.extend({},ub,h),b&&(h.start=null,h.end=null),f.push.apply(f,this.expandEvent(this.buildEventFromInput(h),e.start,e.end)));return f};var vb=c.BasicView=eb.extend({scroller:null,dayGridClass:Xa,dayGrid:null,dayNumbersVisible:!1,colWeekNumbersVisible:!1,cellWeekNumbersVisible:!1,weekNumberWidth:null,headContainerEl:null,headRowEl:null,initialize:function(){this.dayGrid=this.instantiateDayGrid(),this.scroller=new fb({overflowX:"hidden",overflowY:"auto"})},instantiateDayGrid:function(){var a=this.dayGridClass.extend(wb);return new a(this)},setRange:function(a){eb.prototype.setRange.call(this,a),this.dayGrid.breakOnWeeks=/year|month|week/.test(this.intervalUnit),this.dayGrid.setRange(a)},computeRange:function(a){var b=eb.prototype.computeRange.call(this,a);return/year|month/.test(b.intervalUnit)&&(b.start.startOf("week"),b.start=this.skipHiddenDays(b.start),b.end.weekday()&&(b.end.add(1,"week").startOf("week"),b.end=this.skipHiddenDays(b.end,-1,!0))),b},renderDates:function(){this.dayNumbersVisible=this.dayGrid.rowCnt>1,this.opt("weekNumbers")&&(this.opt("weekNumbersWithinDays")?(this.cellWeekNumbersVisible=!0,this.colWeekNumbersVisible=!1):(this.cellWeekNumbersVisible=!1,this.colWeekNumbersVisible=!0)),this.dayGrid.numbersVisible=this.dayNumbersVisible||this.cellWeekNumbersVisible||this.colWeekNumbersVisible,this.el.addClass("fc-basic-view").html(this.renderSkeletonHtml()),this.renderHead(),this.scroller.render();var b=this.scroller.el.addClass("fc-day-grid-container"),c=a('<div class="fc-day-grid" />').appendTo(b);this.el.find(".fc-body > tr > td").append(b),this.dayGrid.setElement(c),this.dayGrid.renderDates(this.hasRigidRows())},renderHead:function(){this.headContainerEl=this.el.find(".fc-head-container").html(this.dayGrid.renderHeadHtml()),this.headRowEl=this.headContainerEl.find(".fc-row")},unrenderDates:function(){this.dayGrid.unrenderDates(),this.dayGrid.removeElement(),this.scroller.destroy()},renderBusinessHours:function(){this.dayGrid.renderBusinessHours()},unrenderBusinessHours:function(){this.dayGrid.unrenderBusinessHours()},renderSkeletonHtml:function(){return'<table><thead class="fc-head"><tr><td class="fc-head-container '+this.widgetHeaderClass+'"></td></tr></thead><tbody class="fc-body"><tr><td class="'+this.widgetContentClass+'"></td></tr></tbody></table>'},weekNumberStyleAttr:function(){return null!==this.weekNumberWidth?'style="width:'+this.weekNumberWidth+'px"':""},hasRigidRows:function(){var a=this.opt("eventLimit");return a&&"number"!=typeof a},updateWidth:function(){this.colWeekNumbersVisible&&(this.weekNumberWidth=m(this.el.find(".fc-week-number")))},setHeight:function(a,b){var d,e,c=this.opt("eventLimit");this.scroller.clear(),h(this.headRowEl),this.dayGrid.removeSegPopover(),c&&"number"==typeof c&&this.dayGrid.limitRows(c),d=this.computeScrollerHeight(a),this.setGridHeight(d,b),c&&"number"!=typeof c&&this.dayGrid.limitRows(c),b||(this.scroller.setHeight(d),e=this.scroller.getScrollbarWidths(),(e.left||e.right)&&(g(this.headRowEl,e),d=this.computeScrollerHeight(a),this.scroller.setHeight(d)),this.scroller.lockOverflow(e))},computeScrollerHeight:function(a){return a-n(this.el,this.scroller.el)},setGridHeight:function(a,b){b?l(this.dayGrid.rowEls):k(this.dayGrid.rowEls,a,!0)},computeInitialScroll:function(){return{top:0}},queryScroll:function(){return{top:this.scroller.getScrollTop()}},setScroll:function(a){this.scroller.setScrollTop(a.top)},hitsNeeded:function(){this.dayGrid.hitsNeeded()},hitsNotNeeded:function(){this.dayGrid.hitsNotNeeded()},prepareHits:function(){this.dayGrid.prepareHits()},releaseHits:function(){this.dayGrid.releaseHits()},queryHit:function(a,b){return this.dayGrid.queryHit(a,b)},getHitSpan:function(a){return this.dayGrid.getHitSpan(a)},getHitEl:function(a){return this.dayGrid.getHitEl(a)},renderEvents:function(a){this.dayGrid.renderEvents(a),this.updateHeight()},getEventSegs:function(){return this.dayGrid.getEventSegs()},unrenderEvents:function(){this.dayGrid.unrenderEvents()},renderDrag:function(a,b){return this.dayGrid.renderDrag(a,b)},unrenderDrag:function(){this.dayGrid.unrenderDrag()},renderSelection:function(a){this.dayGrid.renderSelection(a)},unrenderSelection:function(){this.dayGrid.unrenderSelection()}}),wb={renderHeadIntroHtml:function(){var a=this.view;return a.colWeekNumbersVisible?'<th class="fc-week-number '+a.widgetHeaderClass+'" '+a.weekNumberStyleAttr()+"><span>"+ha(a.opt("weekNumberTitle"))+"</span></th>":""},renderNumberIntroHtml:function(a){var b=this.view,c=this.getCellDate(a,0);return b.colWeekNumbersVisible?'<td class="fc-week-number" '+b.weekNumberStyleAttr()+">"+b.buildGotoAnchorHtml({date:c,type:"week",forceOff:1===this.colCnt},c.format("w"))+"</td>":""},renderBgIntroHtml:function(){var a=this.view;return a.colWeekNumbersVisible?'<td class="fc-week-number '+a.widgetContentClass+'" '+a.weekNumberStyleAttr()+"></td>":""},renderIntroHtml:function(){var a=this.view;return a.colWeekNumbersVisible?'<td class="fc-week-number" '+a.weekNumberStyleAttr()+"></td>":""}},xb=c.MonthView=vb.extend({computeRange:function(a){var c,b=vb.prototype.computeRange.call(this,a);return this.isFixedWeeks()&&(c=Math.ceil(b.end.diff(b.start,"weeks",!0)),b.end.add(6-c,"weeks")),b},setGridHeight:function(a,b){b&&(a*=this.rowCnt/6),k(this.dayGrid.rowEls,a,!b)},isFixedWeeks:function(){return this.opt("fixedWeekCount")}});d.basic={class:vb},d.basicDay={type:"basic",duration:{days:1}},d.basicWeek={type:"basic",duration:{weeks:1}},d.month={class:xb,duration:{months:1},defaults:{fixedWeekCount:!0}};var yb=c.AgendaView=eb.extend({scroller:null,timeGridClass:$a,timeGrid:null,dayGridClass:Xa,dayGrid:null,axisWidth:null,headContainerEl:null,noScrollRowEls:null,bottomRuleEl:null,initialize:function(){this.timeGrid=this.instantiateTimeGrid(),this.opt("allDaySlot")&&(this.dayGrid=this.instantiateDayGrid()),this.scroller=new fb({overflowX:"hidden",overflowY:"auto"})},instantiateTimeGrid:function(){var a=this.timeGridClass.extend(zb);return new a(this)},instantiateDayGrid:function(){var a=this.dayGridClass.extend(Ab);return new a(this)},setRange:function(a){eb.prototype.setRange.call(this,a),this.timeGrid.setRange(a),this.dayGrid&&this.dayGrid.setRange(a)},renderDates:function(){this.el.addClass("fc-agenda-view").html(this.renderSkeletonHtml()),this.renderHead(),this.scroller.render();var b=this.scroller.el.addClass("fc-time-grid-container"),c=a('<div class="fc-time-grid" />').appendTo(b);this.el.find(".fc-body > tr > td").append(b),this.timeGrid.setElement(c),this.timeGrid.renderDates(),this.bottomRuleEl=a('<hr class="fc-divider '+this.widgetHeaderClass+'"/>').appendTo(this.timeGrid.el),this.dayGrid&&(this.dayGrid.setElement(this.el.find(".fc-day-grid")),this.dayGrid.renderDates(),this.dayGrid.bottomCoordPadding=this.dayGrid.el.next("hr").outerHeight()),this.noScrollRowEls=this.el.find(".fc-row:not(.fc-scroller *)")},renderHead:function(){this.headContainerEl=this.el.find(".fc-head-container").html(this.timeGrid.renderHeadHtml())},unrenderDates:function(){this.timeGrid.unrenderDates(),this.timeGrid.removeElement(),this.dayGrid&&(this.dayGrid.unrenderDates(),this.dayGrid.removeElement()),this.scroller.destroy()},renderSkeletonHtml:function(){return'<table><thead class="fc-head"><tr><td class="fc-head-container '+this.widgetHeaderClass+'"></td></tr></thead><tbody class="fc-body"><tr><td class="'+this.widgetContentClass+'">'+(this.dayGrid?'<div class="fc-day-grid"/><hr class="fc-divider '+this.widgetHeaderClass+'"/>':"")+"</td></tr></tbody></table>"},axisStyleAttr:function(){return null!==this.axisWidth?'style="width:'+this.axisWidth+'px"':""},renderBusinessHours:function(){this.timeGrid.renderBusinessHours(),this.dayGrid&&this.dayGrid.renderBusinessHours()},unrenderBusinessHours:function(){this.timeGrid.unrenderBusinessHours(),this.dayGrid&&this.dayGrid.unrenderBusinessHours()},getNowIndicatorUnit:function(){return this.timeGrid.getNowIndicatorUnit()},renderNowIndicator:function(a){this.timeGrid.renderNowIndicator(a)},unrenderNowIndicator:function(){this.timeGrid.unrenderNowIndicator()},updateSize:function(a){this.timeGrid.updateSize(a),eb.prototype.updateSize.call(this,a)},updateWidth:function(){this.axisWidth=m(this.el.find(".fc-axis"))},setHeight:function(a,b){var c,d,e;this.bottomRuleEl.hide(),this.scroller.clear(),h(this.noScrollRowEls),this.dayGrid&&(this.dayGrid.removeSegPopover(),c=this.opt("eventLimit"),c&&"number"!=typeof c&&(c=Bb),c&&this.dayGrid.limitRows(c)),b||(d=this.computeScrollerHeight(a),this.scroller.setHeight(d),e=this.scroller.getScrollbarWidths(),(e.left||e.right)&&(g(this.noScrollRowEls,e),d=this.computeScrollerHeight(a),this.scroller.setHeight(d)),this.scroller.lockOverflow(e),this.timeGrid.getTotalSlatHeight()<d&&this.bottomRuleEl.show())},computeScrollerHeight:function(a){return a-n(this.el,this.scroller.el)},computeInitialScroll:function(){var a=b.duration(this.opt("scrollTime")),c=this.timeGrid.computeTimeTop(a);return c=Math.ceil(c),c&&c++,{top:c}},queryScroll:function(){return{top:this.scroller.getScrollTop()}},setScroll:function(a){this.scroller.setScrollTop(a.top)},hitsNeeded:function(){this.timeGrid.hitsNeeded(),this.dayGrid&&this.dayGrid.hitsNeeded()},hitsNotNeeded:function(){this.timeGrid.hitsNotNeeded(),this.dayGrid&&this.dayGrid.hitsNotNeeded()},prepareHits:function(){this.timeGrid.prepareHits(),this.dayGrid&&this.dayGrid.prepareHits()},releaseHits:function(){
this.timeGrid.releaseHits(),this.dayGrid&&this.dayGrid.releaseHits()},queryHit:function(a,b){var c=this.timeGrid.queryHit(a,b);return!c&&this.dayGrid&&(c=this.dayGrid.queryHit(a,b)),c},getHitSpan:function(a){return a.component.getHitSpan(a)},getHitEl:function(a){return a.component.getHitEl(a)},renderEvents:function(a){var e,f,b=[],c=[],d=[];for(f=0;f<a.length;f++)a[f].allDay?b.push(a[f]):c.push(a[f]);e=this.timeGrid.renderEvents(c),this.dayGrid&&(d=this.dayGrid.renderEvents(b)),this.updateHeight()},getEventSegs:function(){return this.timeGrid.getEventSegs().concat(this.dayGrid?this.dayGrid.getEventSegs():[])},unrenderEvents:function(){this.timeGrid.unrenderEvents(),this.dayGrid&&this.dayGrid.unrenderEvents()},renderDrag:function(a,b){return a.start.hasTime()?this.timeGrid.renderDrag(a,b):this.dayGrid?this.dayGrid.renderDrag(a,b):void 0},unrenderDrag:function(){this.timeGrid.unrenderDrag(),this.dayGrid&&this.dayGrid.unrenderDrag()},renderSelection:function(a){a.start.hasTime()||a.end.hasTime()?this.timeGrid.renderSelection(a):this.dayGrid&&this.dayGrid.renderSelection(a)},unrenderSelection:function(){this.timeGrid.unrenderSelection(),this.dayGrid&&this.dayGrid.unrenderSelection()}}),zb={renderHeadIntroHtml:function(){var b,a=this.view;return a.opt("weekNumbers")?(b=this.start.format(a.opt("smallWeekFormat")),'<th class="fc-axis fc-week-number '+a.widgetHeaderClass+'" '+a.axisStyleAttr()+">"+a.buildGotoAnchorHtml({date:this.start,type:"week",forceOff:this.colCnt>1},ha(b))+"</th>"):'<th class="fc-axis '+a.widgetHeaderClass+'" '+a.axisStyleAttr()+"></th>"},renderBgIntroHtml:function(){var a=this.view;return'<td class="fc-axis '+a.widgetContentClass+'" '+a.axisStyleAttr()+"></td>"},renderIntroHtml:function(){var a=this.view;return'<td class="fc-axis" '+a.axisStyleAttr()+"></td>"}},Ab={renderBgIntroHtml:function(){var a=this.view;return'<td class="fc-axis '+a.widgetContentClass+'" '+a.axisStyleAttr()+"><span>"+a.getAllDayHtml()+"</span></td>"},renderIntroHtml:function(){var a=this.view;return'<td class="fc-axis" '+a.axisStyleAttr()+"></td>"}},Bb=5,Cb=[{hours:1},{minutes:30},{minutes:15},{seconds:30},{seconds:15}];d.agenda={class:yb,defaults:{allDaySlot:!0,slotDuration:"00:30:00",minTime:"00:00:00",maxTime:"24:00:00",slotEventOverlap:!0}},d.agendaDay={type:"agenda",duration:{days:1}},d.agendaWeek={type:"agenda",duration:{weeks:1}};var Db=eb.extend({grid:null,scroller:null,initialize:function(){this.grid=new Eb(this),this.scroller=new fb({overflowX:"hidden",overflowY:"auto"})},setRange:function(a){eb.prototype.setRange.call(this,a),this.grid.setRange(a)},renderSkeleton:function(){this.el.addClass("fc-list-view "+this.widgetContentClass),this.scroller.render(),this.scroller.el.appendTo(this.el),this.grid.setElement(this.scroller.scrollEl)},unrenderSkeleton:function(){this.scroller.destroy()},setHeight:function(a,b){this.scroller.setHeight(this.computeScrollerHeight(a))},computeScrollerHeight:function(a){return a-n(this.el,this.scroller.el)},renderEvents:function(a){this.grid.renderEvents(a)},unrenderEvents:function(){this.grid.unrenderEvents()},isEventResizable:function(a){return!1},isEventDraggable:function(a){return!1}}),Eb=Oa.extend({segSelector:".fc-list-item",hasDayInteractions:!1,spanToSegs:function(a){for(var e,b=this.view,c=b.start.clone().time(0),d=0,f=[];c<b.end;)if(e=N(a,{start:c,end:c.clone().add(1,"day")}),e&&(e.dayIndex=d,f.push(e)),c.add(1,"day"),d++,e&&!e.isEnd&&a.end.hasTime()&&a.end<c.clone().add(this.view.nextDayThreshold)){e.end=a.end.clone(),e.isEnd=!0;break}return f},computeEventTimeFormat:function(){return this.view.opt("mediumTimeFormat")},handleSegClick:function(b,c){var d;Oa.prototype.handleSegClick.apply(this,arguments),a(c.target).closest("a[href]").length||(d=b.event.url,d&&!c.isDefaultPrevented()&&(window.location.href=d))},renderFgSegs:function(a){return a=this.renderFgSegEls(a),a.length?this.renderSegList(a):this.renderEmptyMessage(),a},renderEmptyMessage:function(){this.el.html('<div class="fc-list-empty-wrap2"><div class="fc-list-empty-wrap1"><div class="fc-list-empty">'+ha(this.view.opt("noEventsMessage"))+"</div></div></div>")},renderSegList:function(b){var d,e,f,c=this.groupSegsByDay(b),g=a('<table class="fc-list-table"><tbody/></table>'),h=g.find("tbody");for(d=0;d<c.length;d++)if(e=c[d])for(h.append(this.dayHeaderHtml(this.view.start.clone().add(d,"days"))),this.sortEventSegs(e),f=0;f<e.length;f++)h.append(e[f].el);this.el.empty().append(g)},groupSegsByDay:function(a){var c,d,b=[];for(c=0;c<a.length;c++)d=a[c],(b[d.dayIndex]||(b[d.dayIndex]=[])).push(d);return b},dayHeaderHtml:function(a){var b=this.view,c=b.opt("listDayFormat"),d=b.opt("listDayAltFormat");return'<tr class="fc-list-heading" data-date="'+a.format("YYYY-MM-DD")+'"><td class="'+b.widgetHeaderClass+'" colspan="3">'+(c?b.buildGotoAnchorHtml(a,{class:"fc-list-heading-main"},ha(a.format(c))):"")+(d?b.buildGotoAnchorHtml(a,{class:"fc-list-heading-alt"},ha(a.format(d))):"")+"</td></tr>"},fgSegHtml:function(a){var g,b=this.view,c=["fc-list-item"].concat(this.getSegCustomClasses(a)),d=this.getSegBackgroundColor(a),e=a.event,f=e.url;return g=e.allDay?b.getAllDayHtml():b.isMultiDayEvent(e)?a.isStart||a.isEnd?ha(this.getEventTimeText(a)):b.getAllDayHtml():ha(this.getEventTimeText(e)),f&&c.push("fc-has-url"),'<tr class="'+c.join(" ")+'">'+(this.displayEventTime?'<td class="fc-list-item-time '+b.widgetContentClass+'">'+(g||"")+"</td>":"")+'<td class="fc-list-item-marker '+b.widgetContentClass+'"><span class="fc-event-dot"'+(d?' style="background-color:'+d+'"':"")+'></span></td><td class="fc-list-item-title '+b.widgetContentClass+'"><a'+(f?' href="'+ha(f)+'"':"")+">"+ha(a.event.title||"")+"</a></td></tr>"}});return d.list={class:Db,buttonTextKey:"list",defaults:{buttonText:"list",listDayFormat:"LL",noEventsMessage:"No events to display"}},d.listDay={type:"list",duration:{days:1},defaults:{listDayFormat:"dddd"}},d.listWeek={type:"list",duration:{weeks:1},defaults:{listDayFormat:"dddd",listDayAltFormat:"LL"}},d.listMonth={type:"list",duration:{month:1},defaults:{listDayAltFormat:"dddd"}},d.listYear={type:"list",duration:{year:1},defaults:{listDayAltFormat:"dddd"}},c});